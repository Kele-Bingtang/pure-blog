(window.webpackJsonp=window.webpackJsonp||[]).push([[309],{632:function(a,s,t){"use strict";t.r(s);var e=t(3),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#持续集成流程说明"}},[a._v("持续集成流程说明")])]),s("li",[s("a",{attrs:{href:"#gitlab-代码托管服务器安装"}},[a._v("Gitlab 代码托管服务器安装")]),s("ul",[s("li",[s("a",{attrs:{href:"#gitlab-简介"}},[a._v("Gitlab 简介")])]),s("li",[s("a",{attrs:{href:"#在-ssh-下安装"}},[a._v("在 SSH 下安装")])]),s("li",[s("a",{attrs:{href:"#在-docker-下安装"}},[a._v("在 Docker 下安装")])])])]),s("li",[s("a",{attrs:{href:"#jdk-安装"}},[a._v("JDK 安装")])]),s("li",[s("a",{attrs:{href:"#jenkins-安装"}},[a._v("jenkins 安装")])]),s("li",[s("a",{attrs:{href:"#jenkins-插件管理"}},[a._v("Jenkins 插件管理")]),s("ul",[s("li",[s("a",{attrs:{href:"#修改-jenkins-插件下载地址"}},[a._v("修改 Jenkins 插件下载地址")])]),s("li",[s("a",{attrs:{href:"#下载中文汉化插件"}},[a._v("下载中文汉化插件")])])])]),s("li",[s("a",{attrs:{href:"#jenkins-用户权限管理"}},[a._v("Jenkins 用户权限管理")]),s("ul",[s("li",[s("a",{attrs:{href:"#创建角色"}},[a._v("创建角色")])]),s("li",[s("a",{attrs:{href:"#创建用户"}},[a._v("创建用户")])]),s("li",[s("a",{attrs:{href:"#给用户分配角色"}},[a._v("给用户分配角色")])]),s("li",[s("a",{attrs:{href:"#创建项目测试权限"}},[a._v("创建项目测试权限")])])])]),s("li",[s("a",{attrs:{href:"#jenkins-凭证管理"}},[a._v("Jenkins 凭证管理")]),s("ul",[s("li",[s("a",{attrs:{href:"#credentials-binding-插件"}},[a._v("Credentials Binding 插件")])]),s("li",[s("a",{attrs:{href:"#安装-git-插件和-git-工具"}},[a._v("安装 Git 插件和 Git 工具")])]),s("li",[s("a",{attrs:{href:"#用户密码类型"}},[a._v("用户密码类型")])]),s("li",[s("a",{attrs:{href:"#ssh-密钥类型"}},[a._v("SSH 密钥类型")])])])]),s("li",[s("a",{attrs:{href:"#maven-安装和配置"}},[a._v("Maven 安装和配置")]),s("ul",[s("li",[s("a",{attrs:{href:"#安装-maven"}},[a._v("安装 Maven")])]),s("li",[s("a",{attrs:{href:"#全局工具配置关联-jdk-和-maven"}},[a._v("全局工具配置关联 JDK 和 Maven")])]),s("li",[s("a",{attrs:{href:"#添加-jenkins-全局变量"}},[a._v("添加 Jenkins 全局变量")])]),s("li",[s("a",{attrs:{href:"#测试-maven-是否配置成功"}},[a._v("测试 Maven 是否配置成功")])])])]),s("li",[s("a",{attrs:{href:"#tomcat-安装和配置"}},[a._v("Tomcat 安装和配置")]),s("ul",[s("li",[s("a",{attrs:{href:"#配置-tomcat-用户角色权限"}},[a._v("配置 Tomcat 用户角色权限")])])])])])]),s("p"),a._v(" "),s("h2",{attrs:{id:"持续集成流程说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#持续集成流程说明"}},[a._v("#")]),a._v(" 持续集成流程说明")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822224215.png",alt:"image-20220822224205145"}})]),a._v(" "),s("ul",[s("li",[a._v("首先，开发人员每天进行代码提交，提交到 Git 仓库")]),a._v(" "),s("li",[a._v("然后，Jenkins 作为持续集成工具，使用 Git 工具到 Git 仓库拉取代码到集成服务器，再配合 JDK，Maven 等软件完成代码编译，代码测试与审查，测试，打包等工作，在这个过程中每一步出错，都重新再执行一次整个流程")]),a._v(" "),s("li",[a._v("最后，Jenkins把生成的jar或war包分发到测试服务器或者生产服务器，测试人员或用户就可以访问应用")])]),a._v(" "),s("h2",{attrs:{id:"gitlab-代码托管服务器安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-代码托管服务器安装"}},[a._v("#")]),a._v(" Gitlab 代码托管服务器安装")]),a._v(" "),s("h3",{attrs:{id:"gitlab-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-简介"}},[a._v("#")]),a._v(" Gitlab 简介")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822224333.png",alt:"image-20220822224332254"}})]),a._v(" "),s("p",[a._v("官网： https://about.gitlab.com/。")]),a._v(" "),s("p",[a._v("GitLab 是一个用于仓库管理系统的开源项目，使用 Git 作为代码管理工具，并在此基础上搭建起来的 Web 服务。")]),a._v(" "),s("p",[a._v("GitLab 和 GitHub 一样属于第三方基于 Git 开发的作品，免费且开源（基于 MIT 协议），与 Github 类似， 可以注册用户，任意提交你的代码，添加 SSH Key 等等。不同的是，GitLab 是可以部署到自己的服务器上，数据库等一切信息都掌握在自己手上，适合团队内部协作开发，你总不可能把团队内部的智慧总放在别人的服务器上吧？简单来说可把 GitLab 看作个人版的 GitHub。")]),a._v(" "),s("h3",{attrs:{id:"在-ssh-下安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-ssh-下安装"}},[a._v("#")]),a._v(" 在 SSH 下安装")]),a._v(" "),s("p",[a._v("官方安装文档：https://gitlab.cn/install/?version=ce")]),a._v(" "),s("h4",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[a._v("#")]),a._v(" 安装依赖")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" policycoreutils-python openssh-server perl\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" sshd\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start sshd\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h4",{attrs:{id:"配置镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置镜像"}},[a._v("#")]),a._v(" 配置镜像")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-fsSL")]),a._v(" https://packages.gitlab.cn/repository/raw/scripts/setup.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" /bin/bash\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"开始安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始安装"}},[a._v("#")]),a._v(" 开始安装")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("EXTERNAL_URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http://192.168.44.103"')]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" gitlab-jh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("除非您在安装过程中指定了自定义密码，否则将随机生成一个密码并存储在 "),s("code",[a._v("/etc/gitlab/initial_root_password")]),a._v(" 文件中（出于安全原因，24 小时后，此文件会被第一次 "),s("code",[a._v("gitlab-ctl reconfigure")]),a._v(" 自动删除，因此若使用随机密码登录，建议安装成功初始登录成功之后，立即修改初始密码）。使用此密码和用户名 "),s("code",[a._v("root")]),a._v(" 登录。")]),a._v(" "),s("h4",{attrs:{id:"gitlab-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-常用命令"}},[a._v("#")]),a._v(" GitLab 常用命令")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("gitlab-ctl start                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动所有 gitlab 组件；")]),a._v("\ngitlab-ctl stop                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止所有 gitlab 组件；")]),a._v("\ngitlab-ctl restart                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重启所有 gitlab 组件；")]),a._v("\ngitlab-ctl status                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看服务状态；")]),a._v("\ngitlab-ctl reconfigure            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动服务；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/gitlab/gitlab.rb         "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改默认的配置文件；")]),a._v("\ngitlab-ctl "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tail")]),a._v("                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看日志；")]),a._v("\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h3",{attrs:{id:"在-docker-下安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-docker-下安装"}},[a._v("#")]),a._v(" 在 Docker 下安装")]),a._v(" "),s("p",[a._v("https://docs.gitlab.cn/jh/install/docker.html")]),a._v(" "),s("p",[a._v("安装所需最小配置")]),a._v(" "),s("ul",[s("li",[a._v("内存至少 4G")]),a._v(" "),s("li",[a._v("系统内核至少在 3.10 以上 "),s("code",[a._v("uname -r")]),a._v(" 命令可查看系统内核版本")])]),a._v(" "),s("h4",{attrs:{id:"安装-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker"}},[a._v("#")]),a._v(" 安装 Docker")]),a._v(" "),s("ol",[s("li",[a._v("更新 yum 源")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum update\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("安装依赖")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" yum-utils device-mapper-persistent-data lvm2\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("添加镜像")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 国外镜像")]),a._v("\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 阿里镜像")]),a._v("\nhttps://mirrors.aliyun.com/docker-ce/linux/centos/gpg\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[a._v("查看源中可使用版本")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v(" yum list docker-ce "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--showduplicates")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sort")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"5"}},[s("li",[a._v("安装指定版本")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"6"}},[s("li",[a._v("配置开机启动项")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("systemctl start "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" version\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h4",{attrs:{id:"使用容器安装-gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用容器安装-gitlab"}},[a._v("#")]),a._v(" 使用容器安装 GitLab")]),a._v(" "),s("ol",[s("li",[a._v("添加容器")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--detach")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".44.103 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--publish")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(":443 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--publish")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GITLAB_HOME")]),a._v("/config:/etc/gitlab:Z "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GITLAB_HOME")]),a._v("/logs:/var/log/gitlab:Z "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GITLAB_HOME")]),a._v("/data:/var/opt/gitlab:Z "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --shm-size 256m "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  registry.gitlab.cn/omnibus/gitlab-jh:latest\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("启动容器")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start gitlab\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("查看已存在的容器")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[a._v("进入容器")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker exec -it  gitlab /bin/bash\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问"}},[a._v("#")]),a._v(" 访问")]),a._v(" "),s("p",[a._v("http://192.168.44.101")]),a._v(" "),s("p",[a._v("当首次运行出现 502 错误的时候排查两个原因")]),a._v(" "),s("ol",[s("li",[a._v("虚拟机内存至少需要 4G")]),a._v(" "),s("li",[a._v("稍微再等等刷新一下可能就好了")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822224902.png",alt:"image-20220822224900683"}})]),a._v(" "),s("h4",{attrs:{id:"管理员账号登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#管理员账号登录"}},[a._v("#")]),a._v(" 管理员账号登录")]),a._v(" "),s("p",[a._v("用户名：root")]),a._v(" "),s("p",[a._v("密码存在下面文件中，登录后需要改密码不然 24 小时之后会失效")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/gitlab/initial_root_password\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"jdk-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jdk-安装"}},[a._v("#")]),a._v(" JDK 安装")]),a._v(" "),s("p",[a._v("检索可用包")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum search java|grep jdk\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("安装")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install java-1.8.0-openjdk\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("首次启动W ar 包会在 "),s("code",[a._v("/root/.jenkins")]),a._v(" 生成配置文件")]),a._v(" "),s("p",[a._v("待完全启动成功后 访问服务器 8080 端口完成配置")]),a._v(" "),s("p",[a._v("初始化后的密码：")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("Jenkins initial setup is required. An admin user has been created and a password generated.\nPlease use the following password to proceed to installation:\n\n4e67bbe261da476abdc63c5b51311646\n\nThis may also be found at: /root/.jenkins/secrets/initialAdminPassword\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("密码文件使用后会自动删除。")]),a._v(" "),s("h2",{attrs:{id:"jenkins-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-安装"}},[a._v("#")]),a._v(" jenkins 安装")]),a._v(" "),s("p",[a._v("官方文档介绍非常详细：https://www.jenkins.io")]),a._v(" "),s("p",[a._v("下载页面：https://jenkins.io/zh/download/")]),a._v(" "),s("h2",{attrs:{id:"jenkins-插件管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-插件管理"}},[a._v("#")]),a._v(" Jenkins 插件管理")]),a._v(" "),s("p",[a._v("Jenkins 本身不提供很多功能，我们可以通过使用插件来满足我们的使用。例如从 Gitlab 拉取代码，使用 Maven 构建项目等功能需要依靠插件完成。接下来演示如何下载插件。")]),a._v(" "),s("h3",{attrs:{id:"修改-jenkins-插件下载地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改-jenkins-插件下载地址"}},[a._v("#")]),a._v(" 修改 Jenkins 插件下载地址")]),a._v(" "),s("p",[a._v("Jenkins 国外官方插件地址下载速度非常慢，所以可以修改为国内插件地址：")]),a._v(" "),s("p",[a._v("Jenkins -> Manage Jenkins -> Manage Plugins，点击 Available，此时他会把 Jenkins 官方的插件列表下载到本地，等下载完后，我们就修改为国内地址。")]),a._v(" "),s("p",[a._v("先进入插件地址")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /var/lib/jenkins/updates\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("复制下面命令，切换国内地址：")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g'")]),a._v(" default.json "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g'")]),a._v(" default.json\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("最后在 Manage Plugins 点击 Advanced，把 Update Site 改为国内插件下载地址：")]),a._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("Sumbit 后，在浏览器输入： http://112.74.169.231:8087/restart，重启 Jenkins。")]),a._v(" "),s("h3",{attrs:{id:"下载中文汉化插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载中文汉化插件"}},[a._v("#")]),a._v(" 下载中文汉化插件")]),a._v(" "),s("p",[a._v("Jenkins -> Manage Jenkins -> Manage Plugins，点击 Available，搜索 "),s("code",[a._v("Chinese")]),a._v("，然后点击 "),s("code",[a._v("Install without restart")]),a._v(" 进行安装。")]),a._v(" "),s("p",[a._v("最后重启 Jenkins 后，就看到 Jenkins 汉化了。（PS：但可能部分菜单汉化会失败）")]),a._v(" "),s("h2",{attrs:{id:"jenkins-用户权限管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-用户权限管理"}},[a._v("#")]),a._v(" Jenkins 用户权限管理")]),a._v(" "),s("p",[a._v("我们可以利用 Role-based Authorization Strategy 插件来管理 Jenkins 用户权限。")]),a._v(" "),s("p",[a._v("先去安装 Role-based Authorization Strategy 插件")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822233131.png",alt:"image-20220822233130427"}})]),a._v(" "),s("p",[a._v("开启权限全局安全配置")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822233146.png",alt:"image-20220822233145016"}})]),a._v(" "),s("p",[a._v("授权策略切换为「Role-Based Strategy」，保存")]),a._v(" "),s("h3",{attrs:{id:"创建角色"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建角色"}},[a._v("#")]),a._v(" 创建角色")]),a._v(" "),s("p",[a._v("在系统管理页面进入 Manage and Assign Roles")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822233325.png",alt:"image-20220822233324434"}})]),a._v(" "),s("p",[a._v("点击 Manage Roles")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822233425.png",alt:"image-20220822233424956"}})]),a._v(" "),s("ul",[s("li",[a._v("Global roles（全局角色）：管理员等高级用户可以创建基于全局的角色")]),a._v(" "),s("li",[a._v("Project roles（项目角色）：针对某个或者某些项目的角色 Slave roles（奴隶角色）：节点相关的权限")])]),a._v(" "),s("p",[a._v("我们添加以下三个角色：")]),a._v(" "),s("ul",[s("li",[a._v("baseRole：该角色为全局角色。这个角色需要绑定 Overall 下面的 Read 权限，是为了给所有用户绑定最基本的 Jenkins 访问权限。注意：如果不给后续用户绑定这个角色，会报错误："),s("code",[a._v("用户名 is missing the Overall/Read permission")])]),a._v(" "),s("li",[a._v("role1：该角色为项目角色。使用正则表达式绑定 "),s("code",[a._v("kbt.*")]),a._v("，意思是只能操作 kbt 开头的项目")]),a._v(" "),s("li",[a._v("role2：该角色也为项目角色。绑定 "),s("code",[a._v("youngkbt.*")]),a._v("，意思是只能操作 youngkbt 开头的项目")])]),a._v(" "),s("h3",{attrs:{id:"创建用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建用户"}},[a._v("#")]),a._v(" 创建用户")]),a._v(" "),s("p",[a._v("在系统管理页面进入 Manage Users，接着点击新建用户，分别创建两个用户：jack 和 eric。")]),a._v(" "),s("h3",{attrs:{id:"给用户分配角色"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#给用户分配角色"}},[a._v("#")]),a._v(" 给用户分配角色")]),a._v(" "),s("p",[a._v("系统管理页面进入 Manage and Assign Roles，点击 Assign Roles。")]),a._v(" "),s("p",[a._v("绑定规则如下：")]),a._v(" "),s("ul",[s("li",[a._v("eric 用户分别绑定 baseRole 和 role1 角色")]),a._v(" "),s("li",[a._v("jack 用户分别绑定 baseRole 和 role2 角色")])]),a._v(" "),s("h3",{attrs:{id:"创建项目测试权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建项目测试权限"}},[a._v("#")]),a._v(" 创建项目测试权限")]),a._v(" "),s("p",[a._v("以 youngkbt 管理员账户创建两个项目，分别为 kbt01 和 youngkbt01")]),a._v(" "),s("p",[a._v("结果为：")]),a._v(" "),s("ul",[s("li",[a._v("eric 用户登录，只能看到 kbt01 项目")]),a._v(" "),s("li",[a._v("jack 用户登录，只能看到 youngkbt01 项目")])]),a._v(" "),s("h2",{attrs:{id:"jenkins-凭证管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-凭证管理"}},[a._v("#")]),a._v(" Jenkins 凭证管理")]),a._v(" "),s("p",[a._v("凭据可以用来存储需要密文保护的数据库密码、Gitlab 密码信息、Docker 私有仓库密码等，以便 Jenkins 可以和这些第三方的应用进行交互。")]),a._v(" "),s("h3",{attrs:{id:"credentials-binding-插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#credentials-binding-插件"}},[a._v("#")]),a._v(" Credentials Binding 插件")]),a._v(" "),s("p",[a._v("要在 Jenkins 使用凭证管理功能，需要安装 Credentials Binding 插件。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822233957.png",alt:"image-20220822233957016"}})]),a._v(" "),s("p",[a._v("安装插件后，左边多了 "),s("strong",[a._v("凭证")]),a._v(" 菜单，在这里管理所有凭证。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234020.png",alt:"image-20220822234019202"}})]),a._v(" "),s("p",[a._v("可以添加的凭证有 5 种：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234034.png",alt:"image-20220822234033594"}})]),a._v(" "),s("ul",[s("li",[a._v("Username with password：用户名和密码")]),a._v(" "),s("li",[a._v("SSH Username with private key：使用 SSH 用户和密钥")]),a._v(" "),s("li",[a._v("Secret file：需要保密的文本文件，使用时 Jenkins 会将文件复制到一个临时目录中，再将文件路径设置到一个变量中，等构建结束后，所复制的Secret file 就会被删除")]),a._v(" "),s("li",[a._v("Secret text：需要保存的一个加密的文本串，如钉钉机器人或 Github 的 api token")]),a._v(" "),s("li",[a._v("Certificate：通过上传证书文件的方式")])]),a._v(" "),s("p",[a._v("常用的凭证类型有：Username with password（用户密码）和 SSH Username with private key（SSH 密钥）")]),a._v(" "),s("p",[a._v("接下来以使用 Git 工具到 Gitlab 拉取项目源码为例，演示 Jenkins 的如何管理 Gitlab 的凭证。")]),a._v(" "),s("h3",{attrs:{id:"安装-git-插件和-git-工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-git-插件和-git-工具"}},[a._v("#")]),a._v(" 安装 Git 插件和 Git 工具")]),a._v(" "),s("p",[a._v("为了让 Jenkins 支持从 Gitlab 拉取源码，需要安装 Git 插件以及在 CentOS 7 上安装 Git 工具。")]),a._v(" "),s("p",[a._v("Git 插件安装：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234304.png",alt:"image-20220822234303850"}})]),a._v(" "),s("p",[a._v("CentOS7 上安装 Git 工具：")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装后查看版本")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"用户密码类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户密码类型"}},[a._v("#")]),a._v(" 用户密码类型")]),a._v(" "),s("blockquote",[s("p",[a._v("创建凭证")])]),a._v(" "),s("p",[a._v("Jenkins -> 凭证 -> 系统 -> 全局凭证 -> 添加凭证")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234438.png",alt:"image-20220822234437657"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234518.png",alt:"image-20220822234517365"}})]),a._v(" "),s("p",[a._v("选择 "),s("code",[a._v("Username with password")]),a._v("，输入 Gitlab 的用户名和密码，点击确定。")]),a._v(" "),s("blockquote",[s("p",[a._v("测试凭证是否可用")])]),a._v(" "),s("p",[a._v("创建一个 FreeStyle 项目：新建 Item -> FreeStyle Project -> 确定。")]),a._v(" "),s("p",[a._v("找到 源码管理 -> Git，在 Repository URL 复制 Gitlab 中的项目 URL")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234636.png",alt:"image-20220822234635824"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234749.png",alt:"image-20220822234747295"}})]),a._v(" "),s("p",[a._v("因为项目的分支是 master 分支，所以下面的地址改为 "),s("code",[a._v("*/master")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234820.png",alt:"image-20220822234808218"}})]),a._v(" "),s("p",[a._v("保存配置后，点击构建 Build Now 开始构建项目")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234928.png",alt:"image-20220822234927473"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822234945.png",alt:"image-20220822234944973"}})]),a._v(" "),s("p",[a._v("查看 "),s("code",[a._v("/var/lib/jenkins/workspace/")]),a._v(" 目录，发现已经从 Gitlab 成功拉取了代码到 Jenkins 中。")]),a._v(" "),s("h3",{attrs:{id:"ssh-密钥类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ssh-密钥类型"}},[a._v("#")]),a._v(" SSH 密钥类型")]),a._v(" "),s("p",[a._v("SSH 免密登录示意图")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822235021.png",alt:"image-20220822235020472"}})]),a._v(" "),s("blockquote",[s("p",[a._v("使用 root 用户生成公钥和私钥")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("ssh-keygen "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" rsa\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("在 "),s("code",[a._v("/root/.ssh/")]),a._v(" 目录保存了公钥和使用")]),a._v(" "),s("ul",[s("li",[a._v("id_rsa：私钥文件")]),a._v(" "),s("li",[a._v("id_rsa.pub：公钥文件")])]),a._v(" "),s("blockquote",[s("p",[a._v("把生成的公钥放在 Gitlab 中")])]),a._v(" "),s("p",[a._v("以 root 账户登录 -> 点击头像 -> Settings -> SSH Keys")]),a._v(" "),s("p",[a._v("复制刚才 id_rsa.pub 文件的内容到这里，点击 "),s("code",[a._v("Add Key")])]),a._v(" "),s("blockquote",[s("p",[a._v("在 Jenkins 中添加凭证，配置私钥")])]),a._v(" "),s("p",[a._v("在 Jenkins 添加一个新的凭证，类型为 "),s("code",[a._v("SSH Username with private key")]),a._v("，把刚才生成私有文件内容复制过来")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822235316.png",alt:"image-20220822235314726"}})]),a._v(" "),s("blockquote",[s("p",[a._v("测试凭证是否可用")])]),a._v(" "),s("p",[a._v("新建 test02 项目 -> 源码管理 -> Git，这次要使用 Gitlab 的 SSH 连接，并且选择 SSH 凭证。")]),a._v(" "),s("p",[a._v("同样尝试构建项目，如果代码可以正常拉取，代表凭证配置成功。")]),a._v(" "),s("h2",{attrs:{id:"maven-安装和配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#maven-安装和配置"}},[a._v("#")]),a._v(" Maven 安装和配置")]),a._v(" "),s("p",[a._v("在 Jenkins 集成服务器上，我们需要安装 Maven 来编译和打包项目。")]),a._v(" "),s("h3",{attrs:{id:"安装-maven"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-maven"}},[a._v("#")]),a._v(" 安装 Maven")]),a._v(" "),s("p",[a._v("先上传 Maven 压缩包到服务器")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xzf")]),a._v(" apache-maven-3.6.2-bin.tar.gz "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 解压")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /opt/maven "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" apache-maven-3.6.2/* /opt/maven "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 移动文件")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("配置环境变量")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/profile\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JAVA_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/lib/jvm/java-1.8.0-openjdk\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MAVEN_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/maven\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/bin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$MAVEN_HOME")]),a._v("/bin\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置生效")]),a._v("\nmvn "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看 Maven 版本")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"全局工具配置关联-jdk-和-maven"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局工具配置关联-jdk-和-maven"}},[a._v("#")]),a._v(" 全局工具配置关联 JDK 和 Maven")]),a._v(" "),s("p",[a._v("Jenkins -> Global Tool Configuration -> JDK -> 新增 JDK，配置如下：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822235600.png",alt:"image-20220822235558796"}})]),a._v(" "),s("p",[a._v("Jenkins -> Global Tool Configuration -> Maven -> 新增 Maven，配置如下：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822235630.png",alt:"image-20220822235628384"}})]),a._v(" "),s("h3",{attrs:{id:"添加-jenkins-全局变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加-jenkins-全局变量"}},[a._v("#")]),a._v(" 添加 Jenkins 全局变量")]),a._v(" "),s("p",[a._v("Manage Jenkins -> Configure System -> Global Properties，添加三个全局变量 JAVA_HOME、M2_HOME、PATH+EXTRA")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822235824.png",alt:"image-20220822235824139"}})]),a._v(" "),s("p",[a._v("修改 Maven 的 settings.xml")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /root/repo "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建本地仓库目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /opt/maven/conf/settings.xml\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("本地仓库改为：/root/repo/")]),a._v(" "),s("p",[a._v("添加阿里云私服地址：")]),a._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("mirror")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("nexus"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("mirrorOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("*"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("mirrorOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" \n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("http://maven.aliyun.com/nexus/content/groups/public/"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("mirror")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"测试-maven-是否配置成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试-maven-是否配置成功"}},[a._v("#")]),a._v(" 测试 Maven 是否配置成功")]),a._v(" "),s("p",[a._v("使用之前的 Gitlab 密码测试项目，修改配置：")]),a._v(" "),s("p",[a._v("构建 -> 增加构建步骤 -> Execute Shell")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220822235957.png",alt:"image-20220822235957100"}})]),a._v(" "),s("p",[a._v("输入")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("mvn clean package\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220823000019.png",alt:"image-20220823000018310"}})]),a._v(" "),s("p",[a._v("再次构建，如果可以把项目打成 War 包，代表 Maven 环境配置成功啦。")]),a._v(" "),s("h2",{attrs:{id:"tomcat-安装和配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tomcat-安装和配置"}},[a._v("#")]),a._v(" Tomcat 安装和配置")]),a._v(" "),s("p",[a._v("安装 Tomcat8.5。")]),a._v(" "),s("p",[a._v("把 Tomcat 压缩包上传到服务器")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xzf")]),a._v(" apache-tomcat-8.5.47.tar.gz "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 解压")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /opt/tomcat "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" /root/apache-tomcat-8.5.47/* /opt/tomcat "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 移动文件")]),a._v("\n/opt/tomcat/bin/startup.sh "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动tomcat")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("注意：服务器已经关闭了防火墙，所以可以直接访问 Tomcat 啦。")]),a._v(" "),s("p",[a._v("地址为："),s("code",[a._v("http://IP 地址:8080")])]),a._v(" "),s("h3",{attrs:{id:"配置-tomcat-用户角色权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-tomcat-用户角色权限"}},[a._v("#")]),a._v(" 配置 Tomcat 用户角色权限")]),a._v(" "),s("p",[a._v("默认情况下 Tomcat 是没有配置用户角色权限的。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220823000257.png",alt:"image-20220823000255809"}})]),a._v(" "),s("p",[a._v("但是，后续 Jenkins 部署项目到 Tomcat 服务器，需要用到 Tomcat 的用户，所以修改 Tomcat 以下配置，添加用户及权限")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /opt/tomcat/conf/tomcat-users.xml\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("内容如下：")]),a._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("tomcat-users")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("role")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rolename")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("tomcat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("role")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rolename")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("role1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("role")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rolename")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("manager-script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("role")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rolename")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("manager-gui"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("role")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rolename")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("manager-status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("role")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rolename")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("admin-gui"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("role")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rolename")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("admin-script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("user")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("username")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("tomcat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("password")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("tomcat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("roles")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("manager-gui,managerscript,tomcat,admin-gui,admin-script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("tomcat-users")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("p",[a._v("用户和密码都是：tomcat。")]),a._v(" "),s("p",[a._v("注意：为了能够刚才配置的用户登录到 Tomcat，还需要修改以下配置：")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /opt/tomcat/webapps/manager/META-INF/context.xml\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('\x3c!--\n<Valve className="org.apache.catalina.valves.RemoteAddrValve"\n\tallow="127\\.\\d+\\.\\d+\\.\\d+|::1|0:0:0:0:0:0:0:1" />\n--\x3e')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("把上面这行注释掉即可。")]),a._v(" "),s("p",[a._v("重启 Tomcat，访问测试")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("/opt/tomcat/bin/shutdown.sh "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止")]),a._v("\n/opt/tomcat/bin/startup.sh "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("访问："),s("code",[a._v("http://IP地址:8080/manager/html")]),a._v("，看到以下页面代表成功啦。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Jenkins/20220823000529.png",alt:"image-20220823000528343"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);