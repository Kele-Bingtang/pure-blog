(window.webpackJsonp=window.webpackJsonp||[]).push([[438],{761:function(v,_,e){"use strict";e.r(_);var s=e(3),t=Object(s.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("笔记")]),v._v(" "),_("p",[v._v("反规范的命名，唉。")])]),v._v(" "),_("h2",{attrs:{id:"角色"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#角色"}},[v._v("#")]),v._v(" 角色")]),v._v(" "),_("p",[v._v("审核员2名：审核订单的人。2名都审核通过才会通过")]),v._v(" "),_("p",[v._v("接单人多名：处理订单的人，一对一")]),v._v(" "),_("p",[v._v("申报人多名：报修的人，一般为学生")]),v._v(" "),_("h2",{attrs:{id:"名词翻译"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#名词翻译"}},[v._v("#")]),v._v(" 名词翻译")]),v._v(" "),_("h3",{attrs:{id:"实体类简称"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#实体类简称"}},[v._v("#")]),v._v(" 实体类简称")]),v._v(" "),_("p",[v._v("Admin：用户")]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("属性详解")]),v._v(" "),_("p",[_("code",[v._v("id")]),v._v("：用户id")]),v._v(" "),_("p",[_("code",[v._v("account")]),v._v("：用户名")]),v._v(" "),_("p",[_("code",[v._v("password")]),v._v("：密码")])]),v._v(" "),_("p",[v._v("bxd：报修单")]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("属性详解")]),v._v(" "),_("p",[_("code",[v._v("id")]),v._v("：报修单id")]),v._v(" "),_("p",[_("code",[v._v("sbsj")]),v._v("：申报时间")]),v._v(" "),_("p",[_("code",[v._v("eid")]),v._v("：二维码id")]),v._v(" "),_("p",[_("code",[v._v("xxdd")]),v._v("：详细地点")]),v._v(" "),_("p",[_("code",[v._v("yysj")]),v._v("：预约时间（不是具体时间，是字符串）公共区域不用")]),v._v(" "),_("p",[_("code",[v._v("bxlb")]),v._v("：报修类别")]),v._v(" "),_("p",[_("code",[v._v("bxnr")]),v._v("：报修内容")]),v._v(" "),_("p",[_("code",[v._v("sp")]),v._v("：视频（视频地址）")]),v._v(" "),_("p",[_("code",[v._v("tp")]),v._v("：图片（图片地址）")]),v._v(" "),_("p",[_("code",[v._v("sbr")]),v._v("：申报人")]),v._v(" "),_("p",[_("code",[v._v("shy1state")]),v._v("：0未审核，1审核通过，2审核未通过")]),v._v(" "),_("p",[_("code",[v._v("sbrxh")]),v._v("：申报人学号")]),v._v(" "),_("p",[_("code",[v._v("hc")]),v._v("：耗材使用")]),v._v(" "),_("p",[_("code",[v._v("gs")]),v._v("：工时")]),v._v(" "),_("p",[_("code",[v._v("jid")]),v._v("：接单人ybid")]),v._v(" "),_("p",[_("code",[v._v("shy1")]),v._v("：第一位审核员")]),v._v(" "),_("p",[_("code",[v._v("sbrsj")]),v._v("：申报人手机号码")]),v._v(" "),_("p",[_("code",[v._v("shy2")]),v._v("：第二位审核员")]),v._v(" "),_("p",[_("code",[v._v("shy2state")]),v._v("：0未审核，1审核通过，2审核未通过")]),v._v(" "),_("p",[_("code",[v._v("wxsj")]),v._v("：维修时间(或者是撤销时间）")]),v._v(" "),_("p",[_("code",[v._v("cxsy")]),v._v("：撤销事由")]),v._v(" "),_("p",[_("code",[v._v("pj")]),v._v("：评价星级")]),v._v(" "),_("p",[_("code",[v._v("pjnr")]),v._v("：评价内容")]),v._v(" "),_("p",[_("code",[v._v("pjzj")]),v._v("：评价追加")]),v._v(" "),_("p",[_("code",[v._v("state")]),v._v("：1已派单，2已维修，3撤销单，4已验收，5不通过验收\n"),_("code",[v._v("qy")]),v._v("：报修区域")]),v._v(" "),_("p",[_("code",[v._v("qylb")]),v._v("：报修区域列表")]),v._v(" "),_("p",[_("code",[v._v("xq")]),v._v("：校区")]),v._v(" "),_("p",[_("code",[v._v("ewmdd")]),v._v("：二维码所在区域")]),v._v(" "),_("p",[_("code",[v._v("fgts")]),v._v("：返工天数")]),v._v(" "),_("p",[_("code",[v._v("jdsj")]),v._v("：交单时间？")]),v._v(" "),_("p",[_("code",[v._v("yssj")]),v._v("：验收时间")])]),v._v(" "),_("p",[v._v("bxqy：报修区域")]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("属性详解")]),v._v(" "),_("p",[_("code",[v._v("id")]),v._v("：区域编号")]),v._v(" "),_("p",[_("code",[v._v("qy")]),v._v("：区域名称")]),v._v(" "),_("p",[_("code",[v._v("qylb")]),v._v("：区域类别")]),v._v(" "),_("p",[_("code",[v._v("xq")]),v._v("：校区")]),v._v(" "),_("p",[_("code",[v._v("x")]),v._v("：后台管理x坐标")]),v._v(" "),_("p",[_("code",[v._v("y")]),v._v("：后台管理Y坐标")]),v._v(" "),_("p",[_("code",[v._v("ewm")]),v._v("：二维码集合")]),v._v(" "),_("p",[_("code",[v._v("b")]),v._v("：保修单集合")]),v._v(" "),_("p",[_("code",[v._v("countb")]),v._v("：")])]),v._v(" "),_("p",[v._v("ewm：二维码")]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("属性详解")]),v._v(" "),_("p",[_("code",[v._v("id")]),v._v("：二维码编号")]),v._v(" "),_("p",[_("code",[v._v("qid")]),v._v("：区域编号")]),v._v(" "),_("p",[_("code",[v._v("xxdd")]),v._v("：二维码详细地点（不等于报修的详细地点）")]),v._v(" "),_("p",[_("code",[v._v("qy")]),v._v("：报修区域")])]),v._v(" "),_("p",[v._v("hc：耗材")]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("属性详解")]),v._v(" "),_("p",[_("code",[v._v("id")]),v._v("：耗材编号")]),v._v(" "),_("p",[_("code",[v._v("mc")]),v._v("：材料名称")]),v._v(" "),_("p",[_("code",[v._v("jg")]),v._v("：价格")]),v._v(" "),_("p",[_("code",[v._v("dw")]),v._v("：单位")]),v._v(" "),_("p",[_("code",[v._v("kc")]),v._v("：库存")]),v._v(" "),_("p",[_("code",[v._v("lb")]),v._v("：耗材类别")]),v._v(" "),_("p",[_("code",[v._v("xh")]),v._v("：耗材型号")])]),v._v(" "),_("p",[v._v("jdr：接单人")]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("属性详解")]),v._v(" "),_("p",[_("code",[v._v("ybid")]),v._v("：易班id")]),v._v(" "),_("p",[_("code",[v._v("gh")]),v._v("：工号")]),v._v(" "),_("p",[_("code",[v._v("xm")]),v._v("：姓名")]),v._v(" "),_("p",[_("code",[v._v("sj")]),v._v("：手机")]),v._v(" "),_("p",[_("code",[v._v("yx")]),v._v("：邮箱")]),v._v(" "),_("p",[_("code",[v._v("state")]),v._v("：1在职，2休假，3离职")]),v._v(" "),_("p",[_("code",[v._v("ywfw")]),v._v("：（业务范围）1,2,4,8,16,32,64")]),v._v(" "),_("p",[_("code",[v._v("zjds")]),v._v("：")]),v._v(" "),_("p",[_("code",[v._v("dqds")]),v._v("：")]),v._v(" "),_("p",[_("code",[v._v("pjpj")]),v._v("：")])]),v._v(" "),_("p",[v._v("qdb：签到表")]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("属性详解")]),v._v(" "),_("p",[_("code",[v._v("id")]),v._v("：签到表编号")]),v._v(" "),_("p",[_("code",[v._v("qdsj")]),v._v("：签到时间")]),v._v(" "),_("p",[_("code",[v._v("shyid")]),v._v("：审核员id")]),v._v(" "),_("p",[_("code",[v._v("xq")]),v._v("：校区")]),v._v(" "),_("p",[_("code",[v._v("state")]),v._v("：1签到，2签退")])]),v._v(" "),_("p",[v._v("shy：审核员")]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("属性详解")]),v._v(" "),_("p",[_("code",[v._v("ybid")]),v._v("：易班id")]),v._v(" "),_("p",[_("code",[v._v("gh")]),v._v("：工号")]),v._v(" "),_("p",[_("code",[v._v("xm")]),v._v("：姓名")]),v._v(" "),_("p",[_("code",[v._v("zw")]),v._v("：1普通职员，2高级职员")]),v._v(" "),_("p",[_("code",[v._v("xq")]),v._v("：当前校区")]),v._v(" "),_("p",[_("code",[v._v("x")]),v._v("：X坐标")]),v._v(" "),_("p",[_("code",[v._v("y")]),v._v("：Y坐标")])]),v._v(" "),_("h3",{attrs:{id:"其他简称"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#其他简称"}},[v._v("#")]),v._v(" 其他简称")]),v._v(" "),_("p",[v._v("yb：易班")]),v._v(" "),_("p",[v._v("xq：校区")]),v._v(" "),_("h3",{attrs:{id:"service类对象简称"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#service类对象简称"}},[v._v("#")]),v._v(" service类对象简称")]),v._v(" "),_("p",[v._v("bs：报修单的service类对象")]),v._v(" "),_("p",[v._v("es：二维码的service类对象")]),v._v(" "),_("p",[v._v("zdpd：自动派单的service类对象")]),v._v(" "),_("p",[v._v("ss：审核员的service类对象")]),v._v(" "),_("p",[v._v("qs：签到表的service类对象")]),v._v(" "),_("p",[v._v("js：接单人的service类对象")]),v._v(" "),_("p",[v._v("ybmsg：请求易班的service类对象")]),v._v(" "),_("h2",{attrs:{id:"名词解释"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#名词解释"}},[v._v("#")]),v._v(" 名词解释")]),v._v(" "),_("p",[v._v("标记的名词看不懂，这里有解释，都有标记")]),v._v(" "),_("p",[v._v("审核单：审核员要审核的订单")]),v._v(" "),_("p",[v._v("下班单：审核员下班了，但是还没来得及审核的订单。")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("笔记")]),v._v(" "),_("p",[v._v("问就是审核员不想加班，到点直接下班 😄")])]),v._v(" "),_("p",[v._v("返工天数：接单人处理完订单后，开始对该订单计时。类似于淘宝拿到快递后，却没有去app点击确认收货，但是一定时间后app会自动确认收货")]),v._v(" "),_("h2",{attrs:{id:"util包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#util包"}},[v._v("#")]),v._v(" util包")]),v._v(" "),_("h3",{attrs:{id:"类结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#类结构"}},[v._v("#")]),v._v(" 类结构")]),v._v(" "),_("p",[v._v("其他99%不会被修改")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("config\n|—— quartzUtils\n\t  |—— BxdCheckTask \n\t  |—— FgAndPjTask\n\t  |—— OrderListener\n\t  |—— ShyCheck\n├── AesTra\n|── AutoOrder\n├── DictItemTree\n├── EwmUtil\n├── GetInfo\n├── GetSqlSession\n├── Me\n├── ParseUtil\n├── PathUtil\n├── RealMe\n├── UnicodeEncode\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br"),_("span",{staticClass:"line-number"},[v._v("5")]),_("br"),_("span",{staticClass:"line-number"},[v._v("6")]),_("br"),_("span",{staticClass:"line-number"},[v._v("7")]),_("br"),_("span",{staticClass:"line-number"},[v._v("8")]),_("br"),_("span",{staticClass:"line-number"},[v._v("9")]),_("br"),_("span",{staticClass:"line-number"},[v._v("10")]),_("br"),_("span",{staticClass:"line-number"},[v._v("11")]),_("br"),_("span",{staticClass:"line-number"},[v._v("12")]),_("br"),_("span",{staticClass:"line-number"},[v._v("13")]),_("br"),_("span",{staticClass:"line-number"},[v._v("14")]),_("br"),_("span",{staticClass:"line-number"},[v._v("15")]),_("br"),_("span",{staticClass:"line-number"},[v._v("16")]),_("br"),_("span",{staticClass:"line-number"},[v._v("17")]),_("br")])]),_("h3",{attrs:{id:"内容"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容"}},[v._v("#")]),v._v(" 内容")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("quartzUtils")]),v._v("包：都是定时任务执行的类")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("BxdCheckTask")]),v._v("类：获取未派送的订单，将这些订单分配给有工时的接单人，并在易班推送消息给接单人")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("executeBxdCheck")]),v._v("方法：获取未派送的订单，将这些订单分配给有工时的接单人，并在易班推送消息给接单人")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("FgAndPjTask")]),v._v("类："),_("mark",[v._v("返工天数")]),v._v("减一以及15天后默认好评")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("reduceFgts")]),v._v("方法："),_("mark",[v._v("返工天数")]),v._v("减1。用到两个mapper：一个是获取已完成的订单，一个是给这些完成订单的返工时间减1")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("setPjnr")]),v._v("方法：15天后默认好评。用到两个mapper：一个获取已满15天却未验收的订单，一个是给这些未验收订单主动验收，并给好评")]),v._v(" "),_("div",{staticClass:"custom-block danger"},[_("p",{staticClass:"custom-block-title"},[v._v("警告")]),v._v(" "),_("p",[v._v("疑惑：怎么知道已满15天呢，我猜有定时任务，自动加1天吧，目前没看到，如果这条内容没有被删除，代表我没看到加1天的代码")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("OrderListener")]),v._v("类：获取工时超过12的接单人的未处理的订单，交给其他人")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("executeGsCheck")]),v._v("方法：当总订单派单工时已经超过12的接单人，他的其他订单重新派给未满12的接单人")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("ShyCheck")]),v._v("类：获取"),_("mark",[v._v("下班单")]),v._v("，随机分配给在上夜班的审核员进行审核")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("executeShyCheck")]),v._v("：获取"),_("mark",[v._v("下班单")]),v._v("，随机分配给在上夜班的审核员处进行审核")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("AesTra")]),v._v("类：加密解密类")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("encrypt")]),v._v("方法：传入密钥和密码进行加密。目前没用到该方法")]),v._v(" "),_("li",[_("code",[v._v("decrypt")]),v._v("方法：传入密钥和密码进行解密。目前没用到该方法")]),v._v(" "),_("li",[_("code",[v._v("parseByte2HexStr")]),v._v("方法：位运算进行加密。由"),_("code",[v._v("encrypt")]),v._v("方法调用")]),v._v(" "),_("li",[_("code",[v._v("parseHexStr2Byte")]),v._v("方法：位运算进行解密。由"),_("code",[v._v("decrypt")]),v._v("方法调用")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("AutoOrder")]),v._v("类：处理派送订单类")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("zdpd")]),v._v("方法：查找符合接单条件的接单人直接派单。条件：在职、工时小于12、在负责的区域里，当天签到了")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("DictItemTree")]),v._v("类：维修列表的实体类。存储如物业维修、热随维修、家电维修、空调维修等信息")]),v._v(" "),_("div",{staticClass:"custom-block danger"},[_("p",{staticClass:"custom-block-title"},[v._v("警告")]),v._v(" "),_("p",[v._v("疑惑：为什么放在utils目录下")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("EwmUtil")]),v._v("类：二维码工具类")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("generateQRCodeImage")]),v._v("方法：生成二维码的条纹格式。用到的"),_("code",[v._v("BarcodeFormat.QR_CODE")]),v._v("枚举代表条纹格式的二维码")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("GetInfo")]),v._v("类：与易班进行授权，并获取登录用户的隐私信息（token）和普通信息（用户名，头像）和真实信息（真实姓名）")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("init")]),v._v("方法：要求授权并获得token，将token存入"),_("code",[v._v("session")]),v._v("域里，如果授权失败，则返回登录页面继续授权")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("getMe")]),v._v("方法：获取用户的基本信息，如用户名，头像，学校名等，存入"),_("code",[v._v("Me")]),v._v("实体类中。")]),v._v(" "),_("div",{staticClass:"custom-block warning"},[_("p",{staticClass:"custom-block-title"},[v._v("注意")]),v._v(" "),_("p",[v._v("项目里并没有用到这个方法！用到下面这个方法")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("getRealMe")]),v._v("方法：在"),_("code",[v._v("getMe")]),v._v("方法上，多了一个实体类"),_("code",[v._v("RealMe")]),v._v("，它不仅封装了"),_("code",[v._v("Me")]),v._v("实体类，还有用户其他的真实信息如身份证。都存入session")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("printError")]),v._v("方法：获取报错信息，存储session中，key为"),_("code",[v._v("message")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("GetSqlSession")]),v._v("类：获取mybatis的"),_("code",[v._v("openSession")]),v._v("对象。")]),v._v(" "),_("div",{staticClass:"custom-block warning"},[_("p",{staticClass:"custom-block-title"},[v._v("注意")]),v._v(" "),_("p",[v._v("项目没有用到！")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("Me")]),v._v("类：用户信息的实体类，如昵称、性别、头像、学校等信息。主要存储与易班请求后得到数据的一个实体类。")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("ParseUtil")]),v._v("类：解析报修类型和耗材内容。大部分内容都在数据库的"),_("code",[v._v("bxd")]),v._v("表")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("paraseBxlb")]),v._v("方法：参数为数字-数字。如2-2，3-1。根据数字获得不同的报修内容，最终返回的结果是报修类型-具体类型。如 物业报修-家具。")]),v._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[v._v("提示")]),v._v(" "),_("p",[v._v("其实传来的参数是数字，解析后就是内容。数据库里已经规定一个数字代表一个内容")])]),v._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[v._v("点击我查看数字对应的类型")]),v._v(" "),_("p",[v._v("第一个数字：")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("1：物业保修")])]),v._v(" "),_("li",[_("p",[v._v("2：水电维修")])]),v._v(" "),_("li",[_("p",[v._v("3：热水维修")])]),v._v(" "),_("li",[_("p",[v._v("4：家电维修")])]),v._v(" "),_("li",[_("p",[v._v("5：空调维修")])]),v._v(" "),_("li",[_("p",[v._v("6：其他维修")])])]),v._v(" "),_("p",[v._v("第二个数字：")]),v._v(" "),_("p",[v._v("1：家具")]),v._v(" "),_("p",[v._v("2：腻子")]),v._v(" "),_("p",[v._v("3：墙砖")]),v._v(" "),_("p",[v._v("......")]),v._v(" "),_("p",[v._v("具体数据库，第二个数字有60个左右")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("paraseHc")]),v._v("方法：获取耗材的相关信息。和上面方法类似，解析分割传来的参数，获得不同的小参数，去数据库获取内容，具体看源码")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("paraseHc1")]),v._v("方法：和"),_("code",[v._v("paraseHc")]),v._v("几乎一样，只不过返回结果前，多加了一个字符串作为标识符")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("getzlb")]),v._v("方法：提供保修类型的英文，转化对应的中文，就是上方隐藏的内容")])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("PathUtil")]),v._v("类：获取存放信息表格的路径，即s"),_("code",[v._v("tatic")]),v._v("所在的路径，分为生产和开发两个路径。前者是resource目录，后者是指定一个本地的文件夹")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("RealMe")]),v._v("类："),_("code",[v._v("Me")]),v._v("类的封装实体类，在"),_("code",[v._v("Me")]),v._v("的基础上多加了一些用户的真实信息")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("UnicodeEncode")]),v._v("类：")]),v._v(" "),_("div",{staticClass:"custom-block danger"},[_("p",{staticClass:"custom-block-title"},[v._v("警告")]),v._v(" "),_("p",[v._v("不知道有何用处")])])])]),v._v(" "),_("h3",{attrs:{id:"优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[v._v("#")]),v._v(" 优化")]),v._v(" "),_("ol",[_("li",[v._v("命名要规范")]),v._v(" "),_("li",[_("code",[v._v("GetInfo")]),v._v("类的"),_("code",[v._v("getMe")]),v._v("方法和"),_("code",[v._v("getRealMe")]),v._v("方法合并")]),v._v(" "),_("li",[_("code",[v._v("Me")]),v._v("和"),_("code",[v._v("RealMe")]),v._v("和"),_("code",[v._v("DictItemTree")]),v._v("实体类不应该放在util目录下")]),v._v(" "),_("li",[_("code",[v._v("ParseUtil")]),v._v("类有switch，可尝试解构")])]),v._v(" "),_("h2",{attrs:{id:"config包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#config包"}},[v._v("#")]),v._v(" config包")]),v._v(" "),_("h3",{attrs:{id:"结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结构"}},[v._v("#")]),v._v(" 结构")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("config\n├── CrosConfig\n|── QuartzConfiguration\n├── RestTemplateConfig\n├── Swagger2Config\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br"),_("span",{staticClass:"line-number"},[v._v("5")]),_("br")])]),_("h3",{attrs:{id:"内容-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容-2"}},[v._v("#")]),v._v(" 内容")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("CrosConfig")]),v._v("类：解决跨域问题")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("QuartzConfiguration")]),v._v("类：定时任务。一共有4个定时任务。分别为")]),v._v(" "),_("ol",[_("li",[_("p",[_("code",[v._v("OrderListener")]),v._v("类的"),_("code",[v._v("executeGsCheck")]),v._v("方法：当总订单派单工时已经超过12的接单人，他的其他订单重新派给未满12的接单人")]),v._v(" "),_("blockquote",[_("p",[v._v("每天9点-18点内 每隔20分钟 执行一次这个方法")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("ShyCheck")]),v._v("类的"),_("code",[v._v("executeShyCheck")]),v._v("方法：获取"),_("mark",[v._v("下班单")]),v._v("，随机分配给在上夜班的审核员进行审核")]),v._v(" "),_("blockquote",[_("p",[v._v("早上8点-早上10点 每隔15分钟 执行一次这个方法")])]),v._v(" "),_("div",{staticClass:"custom-block danger"},[_("p",{staticClass:"custom-block-title"},[v._v("警告")]),v._v(" "),_("p",[v._v("有疑惑，既然获取下班单，那么应该是晚上的夜班才对，怎么是早上")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("BxdCheckTask")]),v._v("类的"),_("code",[v._v("executeBxdCheck")]),v._v("方法：处理没有派送的订单，让这些订单分配给空闲的"),_("mark",[v._v("接单人")]),v._v("去处理。轮询查找")]),v._v(" "),_("blockquote",[_("p",[v._v("早上9点-早上18点 每隔20分钟 执行一次")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("FgAndPjTask")]),v._v("类的"),_("code",[v._v("executeFgAndPjTask")]),v._v("："),_("mark",[v._v("返工天数")]),v._v("减一以及15天后默认好评")]),v._v(" "),_("blockquote",[_("p",[v._v("每天凌晨 3:30 触发一次")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("RestTemplateConfig")]),v._v("类：将"),_("code",[v._v("RestTemplate")]),v._v("类放入IOC容器里，该类是restful风格的http。并给该http设置一些参数如请求超时时间，响应超时时间等，因为项目打算用"),_("code",[v._v("RestTemplate")]),v._v("来和易班进行请求。不可能无线请求下去，一定时间内易班不给数据，则撤回请求，并报错，存入日志")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("Swagger2Config")]),v._v("类：配置swagger，用于生成接口文档。指定了标题、描述、版本、作者、许可证等")])])]),v._v(" "),_("h2",{attrs:{id:"constant包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#constant包"}},[v._v("#")]),v._v(" constant包")]),v._v(" "),_("h3",{attrs:{id:"结构-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结构-2"}},[v._v("#")]),v._v(" 结构")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("constant\n├── GlmcConstants\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br")])]),_("h3",{attrs:{id:"内容-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容-3"}},[v._v("#")]),v._v(" 内容")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("GlmcConstants")]),v._v("类：桂林医学院报修系统的常量类。只有两个内容")]),v._v(" "),_("div",{staticClass:"language-java line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-java"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[v._v("/**\n* 总工时，单位：小时\n */")]),v._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("public")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("static")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("final")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("double")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token constant"}},[v._v("GS")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[v._v("12.0")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("public")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("static")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("final")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[v._v("String")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token constant"}},[v._v("HC_APPEND_SYMBOL")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"="')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v("\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br"),_("span",{staticClass:"line-number"},[v._v("5")]),_("br")])])])]),v._v(" "),_("h2",{attrs:{id:"exception包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#exception包"}},[v._v("#")]),v._v(" exception包")]),v._v(" "),_("h3",{attrs:{id:"结构-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结构-3"}},[v._v("#")]),v._v(" 结构")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("exception\n├── GlobalExceptionHandler\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br")])]),_("h3",{attrs:{id:"内容-4"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容-4"}},[v._v("#")]),v._v(" 内容")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("GlobalExceptionHandler")]),v._v("类：全局异常处理类。")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("笔记")]),v._v(" "),_("p",[v._v("用到了"),_("code",[v._v("@ControllerAdvice")]),v._v("注解，指定哪些方法处理哪些异常")])])])]),v._v(" "),_("h2",{attrs:{id:"filter包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#filter包"}},[v._v("#")]),v._v(" filter包")]),v._v(" "),_("h3",{attrs:{id:"结构-4"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结构-4"}},[v._v("#")]),v._v(" 结构")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("filter\n├── AddResponseHeaderFilter\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br")])]),_("h3",{attrs:{id:"内容-5"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容-5"}},[v._v("#")]),v._v(" 内容")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("AddResponseHeaderFilter")]),v._v("类：给响应头配置参数，如"),_("code",[v._v("UTF-8")]),v._v("，保证返回给前端的信息不乱码")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("笔记")]),v._v(" "),_("p",[v._v("该类继承了"),_("code",[v._v("OncePerRequestFilter")]),v._v("类，表示能够确保在一次请求只通过一次filter，而不需要重复执行。")]),v._v(" "),_("p",[v._v("其实在spring里，每个filter都默认继承OncePerRequestFilter")])])])]),v._v(" "),_("h2",{attrs:{id:"response包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#response包"}},[v._v("#")]),v._v(" response包")]),v._v(" "),_("h3",{attrs:{id:"结构-5"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结构-5"}},[v._v("#")]),v._v(" 结构")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("response\n├── ResponseData\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br")])]),_("h3",{attrs:{id:"内容-6"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容-6"}},[v._v("#")]),v._v(" 内容")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("ResponseData")]),v._v("类：封装返回前端信息实体类，有状态码、信息数字、数据")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("状态status：success、false")])]),v._v(" "),_("li",[_("p",[v._v("信息数字info：")]),v._v(" "),_("ul",[_("li",[v._v("0：未登录授权请登录，")]),v._v(" "),_("li",[v._v("1：程序错误请刷新，")]),v._v(" "),_("li",[v._v("2：无效参数，")]),v._v(" "),_("li",[v._v("3：缺少传递必要参数")]),v._v(" "),_("li",[v._v("其余的info就自己定义")])])])])])]),v._v(" "),_("h2",{attrs:{id:"service包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#service包"}},[v._v("#")]),v._v(" service包")]),v._v(" "),_("h3",{attrs:{id:"结构-6"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结构-6"}},[v._v("#")]),v._v(" 结构")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("service\n|—— impl\n\t|—— 实现类\n├── AdminService\n|── BxdService\n├── BxqyService\n├── EwmService\n├── ExportService\n├── HcService\n├── IDictService\n├── JdrService\n├── QdbService\n├── ShyService\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br"),_("span",{staticClass:"line-number"},[v._v("5")]),_("br"),_("span",{staticClass:"line-number"},[v._v("6")]),_("br"),_("span",{staticClass:"line-number"},[v._v("7")]),_("br"),_("span",{staticClass:"line-number"},[v._v("8")]),_("br"),_("span",{staticClass:"line-number"},[v._v("9")]),_("br"),_("span",{staticClass:"line-number"},[v._v("10")]),_("br"),_("span",{staticClass:"line-number"},[v._v("11")]),_("br"),_("span",{staticClass:"line-number"},[v._v("12")]),_("br"),_("span",{staticClass:"line-number"},[v._v("13")]),_("br")])]),_("h3",{attrs:{id:"内容-7"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容-7"}},[v._v("#")]),v._v(" 内容")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("AdminService")]),v._v("接口：用户相关操作")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("login")]),v._v(" 方法：登录")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("BxdService")]),v._v(" 接口：报修单相关操作")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("selforsbr")]),v._v(" 方法：根据申报人学号，获取该申报人申报的报修单")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selbxdforshyid")]),v._v(" 方法：根据报修单id，获取该报修单，返回内容只要求有审核员、审核员是否同意、接单人id，二维码id的信息")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selbxdbyadmin")]),v._v(" 方法：")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selbxdforeid")]),v._v(" 方法：根据二维码id，获取由该二维码扫描出的没有完成的报修单")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selbxdbyjdr")]),v._v(" 方法：根据接单人的易班id，获取由该接单人处理的报修单，如果报修单的状态不为空、二维码id不为空，也加入判断中")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selbxdbyshy")]),v._v(" 方法：根据审核员id，获得该审核员  处理  过的报修单。报修单不包括已撤回的，如果二维码id不为空，获得的报修单是该二维码区域的")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxdbysbr")]),v._v(" 方法：根据申报人学号、报修单id，来更新该报修单")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("更新条件")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("如果申报人撤销了，则将报修单状态改为已撤销")])]),v._v(" "),_("li",[_("p",[v._v("如果申报人进行评价，则将该报修单的评价体系 加上 评价星级和内容")])]),v._v(" "),_("li",[_("p",[v._v("如果申报人追加评价，则将该报修单的评价体系 加上 该追加评价内容")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxd1byshy")]),v._v(" 方法：当审核员 1 处理报修单，则根据该报修单 id，来进行更新处理结果")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("更新条件")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("如果耗材了，则在报修单表加上耗材内容")])]),v._v(" "),_("li",[_("p",[v._v("如果接单人消耗工时了，则在报修单表加上消耗的工时")])]),v._v(" "),_("li",[_("p",[v._v("审核员2也处理了报修单，则在报修单表上加上处理结果")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxd2byshy")]),v._v(" 方法：和上方同理，只是审核员1和审核员2调换位置")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxdhcbyshy")]),v._v(" 方法：当审核员1或者审核员2处理报修单，则根据该报修单id，来进行更新处理结果")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("更新条件")]),v._v(" "),_("ol",[_("li",[v._v("如果耗材了，则在报修单表加上耗材内容")]),v._v(" "),_("li",[v._v("如果接单人消耗工时了，则在报修单表加上消耗的工时")])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxdbyadmin")]),v._v(" 方法：只要报修单表的任意字段不为空，则进行更新")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("fg")]),v._v(" 方法：更新申报时间、交单时间、验收时间，只要报修单表的任意字段不为空，则进行更新")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxdbyjdr")]),v._v(" 方法：通过接单人id和报修单id，来更新该报修单")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("del")]),v._v(" 方法：根据报修单id，删除该报修单")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("newbxdbysbr")]),v._v(" 方法：插入数据到报修单表中")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selnumforstate")]),v._v(" 方法：查询不同状态的报修单总数，如已派单的报修单有多少个、已维修的报修单有多少个")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selnumforpj")]),v._v(" 方法：查询不同评价星级的报修单总和，如 5星的报修单有多少个")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("allcount")]),v._v(" 方法：查询一共有多少个报修单，即表里的全部报修单")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selgs")]),v._v(" 方法：查询接单人当天 已维修和已验收 报修单的所花费的工时，工时四舍五入计算，保留小数点 12 位")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("tj")]),v._v(" 方法：获取一些不同状态的报修单数量")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("getsbrbxdnewid")]),v._v(" 方法：根据申报人学号，获取他最新申报的报修单，可能申报了多个，这方法只获取最新时间的那个")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxdbyysr")]),v._v(" 方法：更新报修单的状态，如果验收时间不为空，则也进行更新")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selishc")]),v._v(" 方法：根据报修单id，查询该报修单的耗材数据")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selonebxd")]),v._v(" 方法：根据报修单id，查询该报修单的全部信息")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("xxsjBxd")]),v._v(" 方法：查看在休息时间内  有一个审核员审核，另一个审核员未审核的报修单的报修单。休息时间：当天 18点 到第二天 10点")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selwpdbxd")]),v._v(" 方法：查询前20个未派单的报修单")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selBxdByMap")]),v._v(" 方法：根据一个 map，查询符合条件的报修单")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("map 内容")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("当status状态不为空，则返回对应状态的报修单。支持多个。状态对应： 1已派单，2已维修，3撤销单，4已验收，5不通过验收")])]),v._v(" "),_("li",[_("p",[v._v("当taskFgts不为空，则获取返工天数大于0的报修单")])]),v._v(" "),_("li",[_("p",[v._v("当taskPjnr不为空，则获取评价内容为空、评价星级为空、返工天数为0的报修单")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("updateBatch")]),v._v(" 方法：根据多个id，批量更新对应id的报修单")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("更新条件")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("taskFgts不为空，代表返工天数未满15天，则进行返工天数减少1")])]),v._v(" "),_("li",[_("p",[v._v("taskPjnr不为空，代表返工天数到达15天，则默认五星评价星级评价，内容为好评")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("seljdrforpd")]),v._v(" 方法：仅查询出有 接单人易班id、业务范围，不同状态的接单人信息，还包括 所有在职的易班id总数")])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("BxqyService")]),v._v(" 接口：报修区域相关操作")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selbxqy")]),v._v(" 方法：根据报修区域id，获取该报修区域的数据")]),v._v(" "),_("li",[_("code",[v._v("selallqy")]),v._v(" 方法：获取所有报修区域的数据")]),v._v(" "),_("li",[_("code",[v._v("ditu")]),v._v(" 方法：获取某个报修区域的数据")]),v._v(" "),_("li",[_("code",[v._v("newqy")]),v._v(" 方法：插入一条报修区域的数据")]),v._v(" "),_("li",[_("code",[v._v("upqy")]),v._v(" 方法：更新一条报修区域的数据")]),v._v(" "),_("li",[_("code",[v._v("selByEwmId")]),v._v(" 方法：根据二维码id，查询该二维码数据")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("EwmService")]),v._v(" 接口：二维码相关操作")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selewm")]),v._v(" 方法：根据区域id，查询该区域的二维码数据")]),v._v(" "),_("li",[_("code",[v._v("selqyidbyewm")]),v._v(" 方法：根据二维码id，查询该二维码的数据")]),v._v(" "),_("li",[_("code",[v._v("selqybysbr")]),v._v(" 方法：根据二维码id，查询该二维码和所在的报修区域的数据")]),v._v(" "),_("li",[_("code",[v._v("newewm")]),v._v(" 方法：插入一个二维码")]),v._v(" "),_("li",[_("code",[v._v("upewm")]),v._v(" 方法：更新一个二维码")]),v._v(" "),_("li",[_("code",[v._v("selxxwz")]),v._v(" 方法：获得二维码的详细地点信息")]),v._v(" "),_("li",[_("code",[v._v("selById")]),v._v(" 方法：根据二维码id，获取该二维码的数据")]),v._v(" "),_("li",[_("code",[v._v("updQidyAdmin")]),v._v(" 方法：根据二维码id范围，更新范围内的二维码所处的区域")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("ExportService")]),v._v(" 接口：将数据以xls文件形式导出")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("HcService")]),v._v(" 接口：耗材相关操作")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selall")]),v._v(" 方法：查询所有耗材表的数据")]),v._v(" "),_("li",[_("code",[v._v("selHcByLb")]),v._v(" 方法：根据一级类别和二级类别获取耗材表的数据")]),v._v(" "),_("li",[_("code",[v._v("selOneHc")]),v._v(" 方法：根据耗材id，获取该耗材的数据")]),v._v(" "),_("li",[_("code",[v._v("delhc")]),v._v(" 方法：根据耗材id，删除该耗材的数据")]),v._v(" "),_("li",[_("code",[v._v("newhc")]),v._v(" 方法：插入一条耗材数据到耗材表")]),v._v(" "),_("li",[_("code",[v._v("uphc")]),v._v(" 方法：根据耗材id，更新该耗材的数据")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("JdrService")]),v._v(" 接口：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selalljdr")]),v._v(" 方法：查询接单人的数据")]),v._v(" "),_("li",[_("code",[v._v("del")]),v._v(" 方法：根据接单人易班id，删除该接单人的数据")]),v._v(" "),_("li",[_("code",[v._v("newjdr")]),v._v(" 方法：插入一条接单人的数据")]),v._v(" "),_("li",[_("code",[v._v("upjdr")]),v._v(" 方法：更新一条接单人的数据")]),v._v(" "),_("li",[_("code",[v._v("selOptimaljdr")]),v._v(" 方法：")]),v._v(" "),_("li",[_("code",[v._v("selOptimaljdrPC")]),v._v(" 方法：")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("MsgPushService")]),v._v(" 接口：发布消息给易班")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("QdbService")]),v._v(" 接口：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selallqy")]),v._v(" 方法：根据审核员id，查询该审核员的所有签到表")]),v._v(" "),_("li",[_("code",[v._v("qd")]),v._v(" 方法：插入一条审核员的签到数据到签到表")]),v._v(" "),_("li",[_("code",[v._v("selectOptimalXq")]),v._v(" 方法：根据审核员id，从签到表查询该审核员签到的校区地点，前提：审核员在职")]),v._v(" "),_("li",[_("code",[v._v("selectOptimalXqForShy")]),v._v(" 方法：根据审核员id，从签到表查询该审核员签到的校区地点，和上方方法比较：该方法不管审核员是否在职")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("ShyService")]),v._v(" 接口：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selallqy")]),v._v(" 方法：查询所有的审核员数据")]),v._v(" "),_("li",[_("code",[v._v("del")]),v._v(" 方法：根据审核员id，删除该审核员")]),v._v(" "),_("li",[_("code",[v._v("newshy")]),v._v(" 方法：插入一条审核员数据")]),v._v(" "),_("li",[_("code",[v._v("UPshy")]),v._v(" 方法：根据审核员id，更新该审核员的姓名和职位，职位：1：普通职员、2：高级职员")]),v._v(" "),_("li",[_("code",[v._v("selOptimalShy")]),v._v(" 方法：根据签到区域，查询今日到第二天早上9点前签到的并且没有签退的审核员")]),v._v(" "),_("li",[_("code",[v._v("selqtShy")]),v._v(" 方法：根据签到区域，查询今日签退的审核员")]),v._v(" "),_("li",[_("code",[v._v("sellsqdshy")]),v._v(" 方法：根据签到区域，查询历史签到以及签退的审核员，也有可能是今天的")]),v._v(" "),_("li",[_("code",[v._v("selOneShy")]),v._v(" 方法：根据易班id，查询id对于的审核员数据")])])])]),v._v(" "),_("h2",{attrs:{id:"controller包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#controller包"}},[v._v("#")]),v._v(" controller包")]),v._v(" "),_("h3",{attrs:{id:"结构-7"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结构-7"}},[v._v("#")]),v._v(" 结构")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("controller\n|—— admin\n\t|—— AdminLogin\n\t|—— AdminServlet\n├── bxd\n\t|—— BxdServlet\n\t|—— Fileload\n\t|—— VideoController\n|── bxqy\n\t|—— BxqyServlet\n├── dict\n\t|—— DictController\n├── ewm\n\t|—— EwmServlet\n├── export\n\t|—— export\n├── hc\n\t|—— HcServlet\n├── jdr\n\t|—— JdrServlet\n├── shy\n\t|—— ShyServlet\n├── Info\n├── Login\n├── Service\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br"),_("span",{staticClass:"line-number"},[v._v("5")]),_("br"),_("span",{staticClass:"line-number"},[v._v("6")]),_("br"),_("span",{staticClass:"line-number"},[v._v("7")]),_("br"),_("span",{staticClass:"line-number"},[v._v("8")]),_("br"),_("span",{staticClass:"line-number"},[v._v("9")]),_("br"),_("span",{staticClass:"line-number"},[v._v("10")]),_("br"),_("span",{staticClass:"line-number"},[v._v("11")]),_("br"),_("span",{staticClass:"line-number"},[v._v("12")]),_("br"),_("span",{staticClass:"line-number"},[v._v("13")]),_("br"),_("span",{staticClass:"line-number"},[v._v("14")]),_("br"),_("span",{staticClass:"line-number"},[v._v("15")]),_("br"),_("span",{staticClass:"line-number"},[v._v("16")]),_("br"),_("span",{staticClass:"line-number"},[v._v("17")]),_("br"),_("span",{staticClass:"line-number"},[v._v("18")]),_("br"),_("span",{staticClass:"line-number"},[v._v("19")]),_("br"),_("span",{staticClass:"line-number"},[v._v("20")]),_("br"),_("span",{staticClass:"line-number"},[v._v("21")]),_("br"),_("span",{staticClass:"line-number"},[v._v("22")]),_("br"),_("span",{staticClass:"line-number"},[v._v("23")]),_("br"),_("span",{staticClass:"line-number"},[v._v("24")]),_("br"),_("span",{staticClass:"line-number"},[v._v("25")]),_("br")])]),_("h3",{attrs:{id:"内容-8"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容-8"}},[v._v("#")]),v._v(" 内容")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("AdminLogin")]),v._v(" 类：用户相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("adminLogin")]),v._v(" 方法：用户登录相关，成功则存入 session")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("AdminServlet")]),v._v(" 类：用户的请求处理类")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("adminServlet")]),v._v(" 方法：获取用户相关的请求，根据请求参数处理内容")])]),v._v(" "),_("p",[v._v("处理内容：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("adminindex")]),v._v(" 方法：获取首页数据")]),v._v(" "),_("li",[_("code",[v._v("bxnum")]),v._v(" 方法：获取报修单总数")]),v._v(" "),_("li",[_("code",[v._v("newewm")]),v._v(" 方法：插入二维码到数据库")]),v._v(" "),_("li",[_("code",[v._v("newqy")]),v._v(" 方法：插入一个报修区域到数据")]),v._v(" "),_("li",[_("code",[v._v("upewm")]),v._v(" 方法：更新二维码到数据库")]),v._v(" "),_("li",[_("code",[v._v("upqy")]),v._v(" 方法：更新报修区域到数据库")]),v._v(" "),_("li",[_("code",[v._v("selewm")]),v._v(" 方法：查询一个二维码数据")]),v._v(" "),_("li",[_("code",[v._v("uppeople")]),v._v(" 方法：根据条件：删除一个审核员、修改一个审核员、删除一个接单人、修改一个接单人")]),v._v(" "),_("li",[_("code",[v._v("newpeople")]),v._v(" 方法：根据条件：添加一个审核员、添加一个接单人")]),v._v(" "),_("li",[_("code",[v._v("upbxdbyadmin")]),v._v(" 方法：分配或者审核报修单，并更新该报修单到数据库")]),v._v(" "),_("li",[_("code",[v._v("selqdb")]),v._v(" 方法：查询某个审核员的签到表数据")]),v._v(" "),_("li",[_("code",[v._v("selalljdr")]),v._v(" 方法：查询接单人的数据")]),v._v(" "),_("li",[_("code",[v._v("selOptimaljdrPC")]),v._v(" 方法：查询适合的接单人")]),v._v(" "),_("li",[_("code",[v._v("selallqy")]),v._v(" 方法：获取某个报修区域的数据")]),v._v(" "),_("li",[_("code",[v._v("selbxdbyadmin")]),v._v(" 方法：")]),v._v(" "),_("li",[_("code",[v._v("selbxdbyadminpc")]),v._v(" 方法：")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("BxdServlet")]),v._v(" 类：报修单相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("bxdServlet")]),v._v(" 方法：获取报修单相关的请求，根据请求参数处理内容")])]),v._v(" "),_("p",[v._v("处理内容：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selbxdforeid")]),v._v(" 方法：根据二维码id，获取由该二维码扫描出的没有完成的报修单")]),v._v(" "),_("li",[_("code",[v._v("selqybysbr")]),v._v(" 方法：提供二维码id，查询该二维码和所在的报修区域的数据")]),v._v(" "),_("li",[_("code",[v._v("filebase64")]),v._v(" 方法：整合返工和新增工单，返工要传jdr的jid和本单的id")]),v._v(" "),_("li",[_("code",[v._v("upbxdbysbr")]),v._v(" 方法：根据申报人学号、报修单id，来更新该报修单，如果报修单已被接单人接到，就提供易班告诉接单人：报修单的更新")]),v._v(" "),_("li",[_("code",[v._v("sbr")]),v._v(" 方法：根据申报人学号，获取该申报人申报的报修单")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("Fileload")]),v._v(" 类：文件上传处理相关的controller")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("VideoController")]),v._v(" 类：视频上传处理相关的controller")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("BxqyServlet")]),v._v(" 类：报修区域相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("bxqyServlet")]),v._v(" 方法：获取报修区域相关的请求，根据请求参数处理内容")])]),v._v(" "),_("p",[v._v("处理内容：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selqybyid")]),v._v(" 方法：根据报修区域id，获取该报修区域的数据")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("DictController")]),v._v(" 类：维修类型相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("getAllWxlb")]),v._v(" 方法：获取维修类别，根据字符串解析为中文")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("EwmServlet")]),v._v(" 类：二维码相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("ewmServlet")]),v._v(" 方法：获取二维码相关的请求，根据请求参数处理内容")])]),v._v(" "),_("p",[v._v("处理内容：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selEwmById")]),v._v(" 方法：根据二维码id，获取该二维码的数据")]),v._v(" "),_("li",[_("code",[v._v("updEwmQid")]),v._v(" 方法：根据二维码id范围，更新范围内的二维码所处的区域")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("export")]),v._v(" 类：导出为 xls 的文件相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("export2xlsx")]),v._v(" 方法：导出为 xls 文件")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("HcServlet")]),v._v(" 类：耗材相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("hcServlet")]),v._v(" 方法：获取耗材相关的请求，根据请求参数处理内容")])]),v._v(" "),_("p",[v._v("处理内容：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selHcByLb")]),v._v(" 方法：根据一级类别和二级类别获取耗材表的数据")]),v._v(" "),_("li",[_("code",[v._v("newhc")]),v._v(" 方法：插入一条耗材数据")]),v._v(" "),_("li",[_("code",[v._v("uphc")]),v._v(" 方法：更新一条耗材数据")]),v._v(" "),_("li",[_("code",[v._v("delhc")]),v._v(" 方法：删除一条耗材数据")]),v._v(" "),_("li",[_("code",[v._v("selhc")]),v._v(" 方法：查询所有耗材表的数据")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("JdrServlet")]),v._v(" 类：接单人相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("jdrServlet")]),v._v(" 方法：获取接单人相关的请求，根据请求参数处理内容")])]),v._v(" "),_("p",[v._v("处理内容：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("selgs")]),v._v(" 方法：查询接单人当天 已维修和已验收 报修单的所花费的工时，存在工时则四舍五入计算，保留小数点 12 位，否则为0")]),v._v(" "),_("li",[_("code",[v._v("upbxdbyjdr")]),v._v(" 方法：通过接单人id和报修单id，来更新该报修单的数据，如耗材工时")]),v._v(" "),_("li",[_("code",[v._v("selbxdbyjdr")]),v._v(" 方法：根据接单人的易班id，获取由该接单人处理的报修单，如果报修单的状态不为空、二维码id不为空，也加入判断中")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("ShyServlet")]),v._v(" 类：审核员相关的controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("shyServlet")]),v._v(" 方法：获取审核员相关的请求，根据请求参数处理内容")])]),v._v(" "),_("p",[v._v("处理内容：")]),v._v(" "),_("ul",[_("li",[_("p",[_("code",[v._v("upbxdhcbyshy")]),v._v(" 方法：当审核员1或者审核员2处理报修单，则根据该报修单id，来进行更新处理结果")]),v._v(" "),_("div",{staticClass:"custom-block note"},[_("p",{staticClass:"custom-block-title"},[v._v("更新条件")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("如果耗材了，则在报修单表加上耗材内容")])]),v._v(" "),_("li",[_("p",[v._v("如果接单人消耗工时了，则在报修单表加上消耗的工时")])])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selqdb")]),v._v(" 方法：根据审核员id，查询该审核员的所有签到表")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("qd")]),v._v(" 方法：插入一条审核员的签到数据到签到表")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxdbyshy")]),v._v(" 方法：当审核员1或者审核员2处理报修单，则根据该报修单id，来进行更新处理结果，并查询该报修单是否已经真正处理，然后推送结果给接单人")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("upbxdbyysr")]),v._v(" 方法：更新报修单的状态，并通知处理该报修单的接单人")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("selbxdbyshy")]),v._v(" 方法：根据审核员id，获得该审核员  处理  过的报修单。报修单不包括已撤回的，如果二维码id不为空，获得的报修单是该二维码区域的")])])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("Info")]),v._v(" 类：从session获取用户的信息")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("Login")]),v._v(" 类：登录成功或者失败，页面的跳转，后者因为用户名密码错误或者过期，跳转登录页")])]),v._v(" "),_("li",[_("p",[_("code",[v._v("Service")]),v._v(" 类：通过易班id，获取该id的个人信息，并通过工号判断属于哪类人。1：申报人、2：接单人、3：审核员")])])]),v._v(" "),_("h2",{attrs:{id:"学到的技巧"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#学到的技巧"}},[v._v("#")]),v._v(" 学到的技巧")]),v._v(" "),_("p",[v._v("大部分学到的内容都在上方用 笔记蓝色框 标记了")]),v._v(" "),_("ul",[_("li",[v._v("如果对数据库进行批量的增删改。不要在Java代码里循环，然后调用mapper层。而是以集合的方式把所有参数传给mybatis，让mybatis进行遍历，即使用"),_("code",[v._v("forreach")]),v._v("标签")]),v._v(" "),_("li",[_("code",[v._v("@ControllerAdvice")]),v._v(" 注解实现全局异常处理")]),v._v(" "),_("li",[_("code",[v._v("OncePerRequestFilter")]),v._v("的概念")])])])}),[],!1,null,null,null);_.default=t.exports}}]);