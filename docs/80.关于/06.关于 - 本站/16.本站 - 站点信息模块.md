---
title: æœ¬ç«™ - ç«™ç‚¹ä¿¡æ¯æ¨¡å—
date: 2021-12-30 21:44:18
permalink: /about/website/info/
titleTag: åŸåˆ›
categories:
  - å…³äº - æœ¬ç«™
tags: 
  - æœ¬ç«™
---

::: note

æœ¬å†…å®¹ä»‹ç»å¦‚ä½•æ­å»ºæœ¬ç«™é¦–é¡µçš„ç«™ç‚¹ä¿¡æ¯ï¼Œä»¥åŠæ¯ç¯‡æ–‡ç« çš„æµè§ˆé‡ç»Ÿè®¡ã€‚

::: right

2021-12-30 @Young Kbt

:::

[[TOC]]



## å‰è¨€

æœ¬å†…å®¹å°†åœ¨é¦–é¡µå’Œæ¯ç¯‡çš„æ–‡ç« é¡µåŠ å…¥äº†ä¸€äº›å…ƒç´ ï¼Œç›®å‰é€‚ç”¨ç‰ˆæœ¬æ˜¯ Vdoing v1.xã€‚

> å¦‚æœä½ æƒ³é›†æˆåˆ°å…¶ä»– Vuepress ä¸»é¢˜ï¼Œé‚£ä¹ˆè¦æ·»åŠ å¡ç‰‡æ ·å¼ï¼Œä¿®æ”¹æŒ‚è½½å…ƒç´ å³å¯ï¼ˆå»ºè®®å…ˆæŒ‰ç…§æ­¥éª¤å®Œæˆä¸€æ¬¡å†è€ƒè™‘é›†æˆï¼‰ã€‚
>
> - **ä¸ºä»€ä¹ˆæ·»åŠ å¡ç‰‡æ ·å¼**ï¼Ÿæœ¬æ¨¡å—çš„ç«™ç‚¹ä¿¡æ¯æ˜¯åŸºäº Vdoing è‡ªå¸¦çš„å¡ç‰‡æ ·å¼ï¼Œæ¨¡å—å¹¶æ²¡æœ‰æ·»åŠ ä»»ä½•å¡ç‰‡æ ·å¼ï¼Œæ‰€ä»¥æƒ³é›†æˆåˆ°å…¶ä»–ä¸»é¢˜ï¼Œåˆ™éœ€è¦å‚è€ƒ Vdoing å¡ç‰‡æ ·å¼è¿›è¡Œæ·»åŠ ï¼Œæˆ–è€…æŒ‰ç…§è‡ªå·±å–œæ¬¢çš„æ ·å¼è¿›è¡Œæ·»åŠ 
> - **ä¸ºä»€ä¹ˆä¿®æ”¹æŒ‚è½½å…ƒç´ **ï¼Ÿæœ¬æ¨¡å—çš„æŒ‚è½½å…ƒç´ æ˜¯åŸºäº Vdoing æ ‡ç­¾æä¾›çš„ class æˆ– idï¼Œè€Œå…¶ä»–ä¸»é¢˜çš„æ ‡ç­¾ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è‡ªè¡Œè¿›è¡Œè°ƒè¯•
>
> æœ¬æ¨¡å—çš„æ‰€æœ‰ **åŠŸèƒ½** æ”¯æŒå¤§éƒ¨åˆ† Vuepress ä¸»é¢˜ï¼Œä½†æ˜¯å¦‚ä½•å°†æ‰€æœ‰åŠŸèƒ½å±•ç¤ºåˆ°å…¶ä»–ä¸»é¢˜é¡µé¢åˆé€‚çš„åœ°æ–¹ï¼Œä»¥åŠå±•ç¤ºçš„æ ·å¼ç­‰ DOM æŠ€æœ¯ï¼Œéœ€è¦è‡ªå·±é€‚é…ã€‚

æ•ˆæœå¦‚ä¸‹ï¼š

![image-20220102230719391](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220102230720.png)

![image-20220103180058191](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220103180059.png)

æœ¬ç«™çš„è®¿é—®é‡å’Œæ–‡ç« çš„æµè§ˆé‡ä½¿ç”¨äº† **ä¸è’œå­**ï¼Œæœ¬åœ°å¯åŠ¨çš„ localhost æœ‰å¾ˆå¤šäººè®¿é—®è¿‡ï¼Œä½†æ— éœ€æ‹…å¿ƒå®é™…éƒ¨ç½²åçš„è®¿é—®é‡ã€‚

[ä¸è’œå­å®˜ç½‘åœ°å€](http://busuanzi.ibruce.info/)

[ä¸è’œå­æ–‡æ¡£åœ°å€](http://ibruce.info/2015/04/04/busuanzi/)

::: warning

**é—®é¢˜**ï¼šæœ¬æ¨¡å—ç›®å‰æœ‰ä¸€ä¸ªåŠŸèƒ½ä¾èµ–äº git çš„ `lastUpdated` åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½å·²ç»å†…ç½® Vuepressï¼Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒï¼Œå”¯ä¸€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šåœ¨æœ¬åœ°æ·»åŠ äº†æ–°çš„æ–‡ä»¶ï¼Œæœ€åæ´»åŠ¨æ—¶é—´çš„æ•°æ®å¯èƒ½ä¸º `NaN`ï¼ˆæ— æ³•è·å–çš„æ„æ€ï¼‰ã€‚

**è§£å†³**ï¼šåªéœ€è¦åœ¨åšå®¢é¡¹ç›®éƒ¨ç½²çš„è¿‡ç¨‹ä¸­æ‰§è¡Œ `git commit` å‘½ä»¤ï¼Œå› ä¸ºè¯¥å‘½ä»¤å°†ä¼šè·å–ä¸€ä¸ªå‡†ç¡®çš„æ—¶é—´ä»£æ›¿ `NaN`ï¼Œç»™æœ¬æ¨¡å—ä½¿ç”¨ã€‚

::: right

2022-01-17 @Young Kbt

:::

## æ·»åŠ meta

ä¸ºä»€ä¹ˆæ·»åŠ  meta å¤´ä¿¡æ¯å‘¢ï¼Œå› ä¸ºåœ¨ Chrome 85 ç‰ˆæœ¬ä¸­ï¼Œä¸ºäº†ä¿æŠ¤ç”¨æˆ·çš„éšç§ï¼Œé»˜è®¤çš„ Referrer Policy åˆ™å˜æˆäº† `strict-origin-when-cross-origin`ã€‚

æ‰€ä»¥å¿…é¡»æ·»åŠ  metaï¼Œå¦åˆ™æ–‡ç« ç»Ÿè®¡è®¿é—®é‡çš„æ•°æ®åˆ™ä¸æ­£ç¡®ã€‚

åœ¨ docs/.vuepress/config.js ä¸‹çš„ head ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```js
['meta', { name: 'referrer', content: 'no-referrer-when-downgrade' }],
```

å¦‚å›¾ï¼š

![image-20220103175843735](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220103175844.png)

## æ·»åŠ åœ¨çº¿å›¾æ ‡

è¿™é‡Œä½¿ç”¨çš„æ˜¯é˜¿é‡ŒçŸ¢é‡åº“ã€‚

åœ°å€ï¼š<https://www.iconfont.cn/>

æ·»åŠ äº†äº”ä¸ªå›¾æ ‡

![image-20220104191943235](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220104192125.png)

å¦‚æœä½ ä¸æƒ³ä½¿ç”¨è‡ªå·±çš„çŸ¢é‡åº“é¡¹ç›®ï¼ˆä¸å®³æ€•æˆ‘åˆ å›¾æ ‡è·‘è·¯ğŸ¤£ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨æˆ‘çš„å›¾æ ‡é¡¹ç›®ç½‘å€ï¼Œ**å½“ä½ å‘ç°å›¾æ ‡å¤±æ•ˆäº†ï¼Œå°±è¯·æ¥è¿™é‡Œè·å–æ–°çš„åœ°å€ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ›´æ–°ï¼Œè¯·åœ¨è¯„è®ºåŒºç•™è¨€**ã€‚

åœ¨ config.js ä¸‹çš„ head ä¸­æ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```js
['link', { rel: 'stylesheet', href: 'https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css' }]
```

å¦‚å›¾ï¼šï¼ˆå›¾ç‰‡çš„å†…å®¹ä¸ä¸€å®šæ˜¯æœ€æ–°çš„ï¼Œä»¥ä¸Šæ–¹ä»£ç å—ä¸ºå‡†ï¼‰

![image-20220104192105981](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220104192107.png)

## Vueæ¨¡æ¿

è¿™é‡Œå…ˆæä¾›ä¸€ä¸ªåœ¨ Vue é‡Œå¸¸ç”¨çš„æ¨¡æ¿ä»£ç ï¼Œå³é€šç”¨ä»£ç ï¼ˆäº†è§£å³å¯ï¼‰ï¼š

```vue
<template>
  <div class="busuanzi">
    <span id="busuanzi_container_site_pv" style="display:none">
      æœ¬ç«™æ€»è®¿é—®é‡
      <span id="busuanzi_value_site_pv"></span>æ¬¡
      <span class="post-meta-divider">|</span>
    </span>
    <span id="busuanzi_container_site_uv" style="display:none">
      æœ¬ç«™è®¿å®¢æ•°
      <span id="busuanzi_value_site_uv"></span>äºº
    </span>
  </div>
</template>
 
<script>
let script;
export default {
  mounted() {
    script = require("busuanzi.pure.js");
  },
  // ç›‘å¬ï¼Œå½“è·¯ç”±å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰§è¡Œ
  watch: {
    $route(to, from) {
      if (to.path != from.path) {
        script.fetch();
      }
    }
  }
};
</script>
```

## ä¸»é¢˜é€‰æ‹©

ä¸‹é¢æœ‰ä¸¤ç§é…ç½®æ–¹å¼å¯ä»¥é€‰ï¼Œåˆ†åˆ«ä¸ºï¼š

- åœ¨çº¿ä¸»é¢˜ï¼šNPM ä¸»é¢˜ï¼Œé‡‡ç”¨ç›‘å¬è·¯ç”±ã€æ’å…¥å¼çš„ä»£ç 
- æœ¬åœ°ä¸»é¢˜ï¼šç«™ç‚¹ä¿¡æ¯æ¨¡å—ä¸é¡µé¢ä¸€èµ·æ¸²æŸ“å‡ºæ¥ï¼Œæ²¡æœ‰å»¶è¿Ÿ

æœ¬åœ°ä¸»é¢˜ä¸å¥½çš„ä¸€ç‚¹å°±æ˜¯ç‰ˆæœ¬å‡çº§åæ›¾ä¿®æ”¹çš„å†…å®¹è¢«é‡ç½®ï¼Œæ‰€ä»¥éœ€è¦è®°å¥½ä¿®æ”¹ä½ç½®ã€å¤‡ä»½ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚å¥½å¤„æ˜¯æ ¹æ®è‡ªå·±çš„éœ€æ±‚åœ¨åŸºç¡€ä¸Šæ‹“å±•ã€‚

**åœ¨çº¿ä¸»é¢˜å…·æœ‰é€šç”¨æ€§ï¼Œå³åœ¨ä»»æ„ç¯å¢ƒï¼ˆå¦‚æœ¬åœ°ä¸»é¢˜ï¼‰éƒ½æœ‰æ•ˆæœã€‚**

## åœ¨çº¿ä¸»é¢˜

> å»ºè®®ï¼šæœ¬å†…å®¹ä»£ç å—æ¯”è¾ƒé•¿ï¼Œå¯ä»¥ç‚¹å‡»ä»£ç å—çš„å³ä¾§ç®­å¤´æ¥æŠ˜å ï¼Œç„¶åç‚¹å‡»å¤åˆ¶å›¾æ ‡è¿›è¡Œå¤åˆ¶å³å¯ã€‚

ä¸ç®¡ä½¿ä¸ä½¿ç”¨æœ¬åœ°ä¸»é¢˜ï¼Œéƒ½å¯ä»¥é…ç½®åœ¨çº¿ä¸»é¢˜çš„ç«™ç‚¹æ¨¡å—ã€‚

### ç½‘ç«™ä¿¡æ¯å·¥å…·ä»£ç 

æ·»åŠ ç½‘ç«™ä¿¡æ¯éœ€è¦çš„è®¡ç®—ä»£ç ã€è·å–å­—æ•°ä»£ç ç­‰å·¥å…·ç±»ã€‚

é¦–å…ˆè¿›å…¥ docs/.vuepress ç›®å½•ï¼Œåˆ›å»º `webSiteInfo` æ–‡ä»¶å¤¹

![image-20220101192402636](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220101192403.png)

ç„¶ååœ¨ webSiteInfo ç›®å½•ä¸‹åˆ›å»º `busuanzi.js` æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ç”¨äº <mark>è·å–è®¿é—®é‡</mark>ã€‚

```js
var bszCaller, bszTag, scriptTag, ready;

var t,
  e,
  n,
  a = !1,
  c = [];

// ä¿®å¤NodeåŒæ„ä»£ç çš„é—®é¢˜
if (typeof document !== "undefined") {
  (ready = function (t) {
    return (
      a ||
      "interactive" === document.readyState ||
      "complete" === document.readyState
        ? t.call(document)
        : c.push(function () {
            return t.call(this);
          }),
      this
    );
  }),
    (e = function () {
      for (var t = 0, e = c.length; t < e; t++) c[t].apply(document);
      c = [];
    }),
    (n = function () {
      a ||
        ((a = !0),
        e.call(window),
        document.removeEventListener
          ? document.removeEventListener("DOMContentLoaded", n, !1)
          : document.attachEvent &&
            (document.detachEvent("onreadystatechange", n),
            window == window.top && (clearInterval(t), (t = null))));
    }),
    document.addEventListener
      ? document.addEventListener("DOMContentLoaded", n, !1)
      : document.attachEvent &&
        (document.attachEvent("onreadystatechange", function () {
          /loaded|complete/.test(document.readyState) && n();
        }),
        window == window.top &&
          (t = setInterval(function () {
            try {
              a || document.documentElement.doScroll("left");
            } catch (t) {
              return;
            }
            n();
          }, 5)));
}

bszCaller = {
  fetch: function (t, e) {
    var n = "BusuanziCallback_" + Math.floor(1099511627776 * Math.random());
    t = t.replace("=BusuanziCallback", "=" + n);
    (scriptTag = document.createElement("SCRIPT")),
      (scriptTag.type = "text/javascript"),
      (scriptTag.defer = !0),
      (scriptTag.src = t),
      document.getElementsByTagName("HEAD")[0].appendChild(scriptTag);
    window[n] = this.evalCall(e);
  },
  evalCall: function (e) {
    return function (t) {
      ready(function () {
        try {
          e(t),
            scriptTag &&
              scriptTag.parentElement &&
              scriptTag.parentElement.removeChild &&
              scriptTag.parentElement.removeChild(scriptTag);
        } catch (t) {
          console.log(t), bszTag.hides();
        }
      });
    };
  },
};

bszTag = {
  bszs: ["site_pv", "page_pv", "site_uv"],
  texts: function (n) {
    this.bszs.map(function (t) {
      var e = document.getElementById("busuanzi_value_" + t);
      e && (e.innerHTML = n[t]);
    });
  },
  hides: function () {
    this.bszs.map(function (t) {
      var e = document.getElementById("busuanzi_container_" + t);
      e && (e.style.display = "none");
    });
  },
  shows: function () {
    this.bszs.map(function (t) {
      var e = document.getElementById("busuanzi_container_" + t);
      e && (e.style.display = "inline");
    });
  },
};

export default () => {
  bszTag && bszTag.hides();
  bszCaller.fetch("//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback", function (t) {
    bszTag.texts(t), bszTag.shows();
  })
};
```

ç„¶ååˆ›å»º `readFile.js` æˆ–è€… `readFile.ts` æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ç”¨äº <mark>ç»Ÿè®¡æ–‡ç« æ•°ç›®</mark> å’Œ <mark>ç½‘ç«™æ€»å­—æ•°</mark> ç­‰ã€‚

æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

:::: tabs :options="{ useUrlFragment: false }"

::: tab JS

```js
const fs = require('fs'); // æ–‡ä»¶æ¨¡å—
const path = require('path'); // è·¯å¾„æ¨¡å—
const matter = require('gray-matter'); // FrontMatterè§£æå™¨ https://github.com/jonschlinkert/gray-matter
const chalk = require('chalk') // å‘½ä»¤è¡Œæ‰“å°ç¾åŒ–
const log = console.log
const docsRoot = path.join(__dirname, '..', '..', '..', 'docs'); // docsæ–‡ä»¶è·¯å¾„

/**
 * è·å–æœ¬ç«™çš„æ–‡ç« æ•°æ®
 * è·å–æ‰€æœ‰çš„ md æ–‡æ¡£ï¼Œå¯ä»¥æ’é™¤æŒ‡å®šç›®å½•ä¸‹çš„æ–‡æ¡£
 */
function readFileList(excludeFiles = [''], dir = docsRoot, filesList = []) {
  const files = fs.readdirSync(dir);
  files.forEach((item, index) => {
    let filePath = path.join(dir, item);
    const stat = fs.statSync(filePath);
    if (!(excludeFiles instanceof Array)) {
      log(chalk.yellow(`error: ä¼ å…¥çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚`))
    }
    excludeFiles.forEach((excludeFile) => {
      if (stat.isDirectory() && item !== '.vuepress' && item !== '@pages' && item !== excludeFile) {
        readFileList(excludeFiles, path.join(dir, item), filesList);  //é€’å½’è¯»å–æ–‡ä»¶
      } else {
        if (path.basename(dir) !== 'docs') { // è¿‡æ»¤ docsç›®å½•çº§ä¸‹çš„æ–‡ä»¶

          const fileNameArr = path.basename(filePath).split('.')
          let name = null, type = null;
          if (fileNameArr.length === 2) { // æ²¡æœ‰åºå·çš„æ–‡ä»¶
            name = fileNameArr[0]
            type = fileNameArr[1]
          } else if (fileNameArr.length === 3) { // æœ‰åºå·çš„æ–‡ä»¶
            name = fileNameArr[1]
            type = fileNameArr[2]
          } else { // è¶…è¿‡ä¸¤ä¸ªâ€˜.â€™çš„
            log(chalk.yellow(`warning: è¯¥æ–‡ä»¶ "${filePath}" æ²¡æœ‰æŒ‰ç…§çº¦å®šå‘½åï¼Œå°†å¿½ç•¥ç”Ÿæˆç›¸åº”æ•°æ®ã€‚`))
            return
          }
          if (type === 'md') { // è¿‡æ»¤é md æ–‡ä»¶
            filesList.push({
              name,
              filePath
            });
          }
        }
      }
    });
  });
  return filesList;
}
/**
 * è·å–æœ¬ç«™çš„æ–‡ç« æ€»å­—æ•°
 * å¯ä»¥æ’é™¤æŸä¸ªç›®å½•ä¸‹çš„ md æ–‡æ¡£å­—æ•°
 */
function readTotalFileWords(excludeFiles = ['']) {
  const filesList = readFileList(excludeFiles);
  var wordCount = 0;
  filesList.forEach((item) => {
    const content = getContent(item.filePath);
    var len = counter(content);
    wordCount += len[0] + len[1];
  });
  if (wordCount < 1000) {
    return wordCount;
  }
  return Math.round(wordCount / 100) / 10 + 'k';
}
/**
 * è·å–æ¯ä¸€ä¸ªæ–‡ç« çš„å­—æ•°
 * å¯ä»¥æ’é™¤æŸä¸ªç›®å½•ä¸‹çš„ md æ–‡æ¡£å­—æ•°
 */
function readEachFileWords(excludeFiles = [''], cn, en) {
  const filesListWords = [];
  const filesList = readFileList(excludeFiles);
  filesList.forEach((item) => {
    const content = getContent(item.filePath);
    var len = counter(content);
    // è®¡ç®—é¢„è®¡çš„é˜…è¯»æ—¶é—´
    var readingTime = readTime(len, cn, en);
    var wordsCount = 0;
    wordsCount = len[0] + len[1];
    if (wordsCount >= 1000) {
      wordsCount = Math.round(wordsCount / 100) / 10 + 'k';
    }
    // fileMatterObj => {content:'å‰”é™¤frontmatteråçš„æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²', data:{<frontmatterå¯¹è±¡>}, ...}
    const fileMatterObj = matter(content, {});
    const matterData = fileMatterObj.data;
    filesListWords.push({ ...item, wordsCount, readingTime, ...matterData });
  });
  return filesListWords;
}

/**
 * è®¡ç®—é¢„è®¡çš„é˜…è¯»æ—¶é—´
 */
function readTime(len, cn = 300, en = 160) {
  var readingTime = len[0] / cn + len[1] / en;
  if (readingTime > 60 && readingTime < 60 * 24) {   // å¤§äºä¸€ä¸ªå°æ—¶ï¼Œå°äºä¸€å¤©
    let hour = parseInt(readingTime / 60);
    let minute = parseInt((readingTime - hour * 60));
    if (minute === 0) {
      return hour + 'h';
    }
    return hour + 'h' + minute + 'm';
  } else if (readingTime > 60 * 24) {      // å¤§äºä¸€å¤©
    let day = parseInt(readingTime / (60 * 24));
    let hour = parseInt((readingTime - day * 24 * 60) / 60);
    if (hour === 0) {
      return day + 'd';
    }
    return day + 'd' + hour + 'h';
  }
  return readingTime < 1 ? '1' : parseInt((readingTime * 10)) / 10 + 'm';   // å–ä¸€ä½å°æ•°
}

/**
 * è¯»å–æ–‡ä»¶å†…å®¹
 */
function getContent(filePath) {
  return fs.readFileSync(filePath, 'utf8');
}
/**
 * è·å–æ–‡ä»¶å†…å®¹çš„å­—æ•°
 * cnï¼šä¸­æ–‡
 * enï¼šä¸€æ•´å¥è‹±æ–‡ï¼ˆæ²¡æœ‰ç©ºæ ¼éš”å¼€çš„è‹±æ–‡ä¸º 1 ä¸ªï¼‰
 */
function counter(content) {
  const cn = (content.match(/[\u4E00-\u9FA5]/g) || []).length;
  const en = (content.replace(/[\u4E00-\u9FA5]/g, '').match(/[a-zA-Z0-9_\u0392-\u03c9\u0400-\u04FF]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|[\u00E4\u00C4\u00E5\u00C5\u00F6\u00D6]+|\w+/g) || []).length;
  return [cn, en];
}

module.exports = {
  readFileList,
  readTotalFileWords,
  readEachFileWords,
}
```

:::

::: tab TS

```tsx
import fs from 'fs'; // æ–‡ä»¶æ¨¡å—
import path from 'path'; // è·¯å¾„æ¨¡å—
import matter from 'gray-matter'; // FrontMatterè§£æå™¨ https://github.com/jonschlinkert/gray-matter
import chalk from 'chalk' // å‘½ä»¤è¡Œæ‰“å°ç¾åŒ–
const log = console.log
const docsRoot = path.join(__dirname, '..', '..', '..', 'docs'); // docsæ–‡ä»¶è·¯å¾„

/**
 * è·å–æœ¬ç«™çš„æ–‡ç« æ•°æ®
 * è·å–æ‰€æœ‰çš„ md æ–‡æ¡£ï¼Œå¯ä»¥æ’é™¤æŒ‡å®šç›®å½•ä¸‹çš„æ–‡æ¡£
 */
function readFileList(excludeFiles: Array<string> = [''], dir: string = docsRoot, filesList: Array<Object> = []) {
  const files = fs.readdirSync(dir);
  files.forEach((item, index) => {
    let filePath = path.join(dir, item);
    const stat = fs.statSync(filePath);
    if (!(excludeFiles instanceof Array)) {
      log(chalk.yellow(`error: ä¼ å…¥çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚`))
    }
    excludeFiles.forEach((excludeFile) => {
      if (stat.isDirectory() && item !== '.vuepress' && item !== '@pages' && item !== excludeFile) {
        readFileList(excludeFiles, path.join(dir, item), filesList);  //é€’å½’è¯»å–æ–‡ä»¶
      } else {
        if (path.basename(dir) !== 'docs') { // è¿‡æ»¤ docsç›®å½•çº§ä¸‹çš„æ–‡ä»¶

          const fileNameArr = path.basename(filePath).split('.')
          let name = null, type = null;
          if (fileNameArr.length === 2) { // æ²¡æœ‰åºå·çš„æ–‡ä»¶
            name = fileNameArr[0]
            type = fileNameArr[1]
          } else if (fileNameArr.length === 3) { // æœ‰åºå·çš„æ–‡ä»¶
            name = fileNameArr[1]
            type = fileNameArr[2]
          } else { // è¶…è¿‡ä¸¤ä¸ªâ€˜.â€™çš„
            log(chalk.yellow(`warning: è¯¥æ–‡ä»¶ "${filePath}" æ²¡æœ‰æŒ‰ç…§çº¦å®šå‘½åï¼Œå°†å¿½ç•¥ç”Ÿæˆç›¸åº”æ•°æ®ã€‚`))
            return
          }
          if (type === 'md') { // è¿‡æ»¤é md æ–‡ä»¶
            filesList.push({
              name,
              filePath
            });
          }
        }
      }
    });
  });
  return filesList;
}
/**
 * è·å–æœ¬ç«™çš„æ–‡ç« æ€»å­—æ•°
 * å¯ä»¥æ’é™¤æŸä¸ªç›®å½•ä¸‹çš„ md æ–‡æ¡£å­—æ•°
 */
function readTotalFileWords(excludeFiles = ['']) {
  const filesList = readFileList(excludeFiles);
  let wordCount = 0;
  filesList.forEach((item: any) => {
    const content = getContent(item.filePath);
    let len = counter(content);
    wordCount += len[0] + len[1];
  });
  if (wordCount < 1000) {
    return wordCount;
  }
  return Math.round(wordCount / 100) / 10 + 'k';
}
/**
 * è·å–æ¯ä¸€ä¸ªæ–‡ç« çš„å­—æ•°
 * å¯ä»¥æ’é™¤æŸä¸ªç›®å½•ä¸‹çš„ md æ–‡æ¡£å­—æ•°
 */
function readEachFileWords(excludeFiles: Array<string> = [''], cn: number, en: number) {
  const filesListWords = [];
  const filesList = readFileList(excludeFiles);
  filesList.forEach((item: any) => {
    const content = getContent(item.filePath);
    let len = counter(content);
    // è®¡ç®—é¢„è®¡çš„é˜…è¯»æ—¶é—´
    let readingTime = readTime(len, cn, en);
    let wordsCount: any = 0;
    wordsCount = len[0] + len[1];
    if (wordsCount >= 1000) {
      wordsCount = Math.round(wordsCount / 100) / 10 + 'k';
    }
    // fileMatterObj => {content:'å‰”é™¤frontmatteråçš„æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²', data:{<frontmatterå¯¹è±¡>}, ...}
    const fileMatterObj = matter(content, {});
    const matterData = fileMatterObj.data;
    filesListWords.push({ ...item, wordsCount, readingTime, ...matterData });
  });
  return filesListWords;
}

/**
 * è®¡ç®—é¢„è®¡çš„é˜…è¯»æ—¶é—´
 */
function readTime(len: Array<number>, cn: number = 300, en: number = 160) {
  let readingTime = len[0] / cn + len[1] / en;
  if (readingTime > 60 && readingTime < 60 * 24) {   // å¤§äºä¸€ä¸ªå°æ—¶ï¼Œå°äºä¸€å¤©
    let hour = Math.trunc(readingTime / 60);
    let minute = Math.trunc(readingTime - hour * 60);
    if (minute === 0) {
      return hour + 'h';
    }
    return hour + 'h' + minute + 'm';
  } else if (readingTime > 60 * 24) {      // å¤§äºä¸€å¤©
    let day = Math.trunc(readingTime / (60 * 24));
    let hour = Math.trunc((readingTime - day * 24 * 60) / 60);
    if (hour === 0) {
      return day + 'd';
    }
    return day + 'd' + hour + 'h';
  }
  return readingTime < 1 ? '1' : Math.trunc(readingTime * 10) / 10 + 'm';   // å–ä¸€ä½å°æ•°
}

/**
 * è¯»å–æ–‡ä»¶å†…å®¹
 */
function getContent(filePath: string) {
  return fs.readFileSync(filePath, 'utf8');
}
/**
 * è·å–æ–‡ä»¶å†…å®¹çš„å­—æ•°
 * cnï¼šä¸­æ–‡
 * enï¼šä¸€æ•´å¥è‹±æ–‡ï¼ˆæ²¡æœ‰ç©ºæ ¼éš”å¼€çš„è‹±æ–‡ä¸º 1 ä¸ªï¼‰
 */
function counter(content: string) {
  const cn = (content.match(/[\u4E00-\u9FA5]/g) || []).length;
  const en = (content.replace(/[\u4E00-\u9FA5]/g, '').match(/[a-zA-Z0-9_\u0392-\u03c9\u0400-\u04FF]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|[\u00E4\u00C4\u00E5\u00C5\u00F6\u00D6]+|\w+/g) || []).length;
  return [cn, en];
}

export {
  readFileList,
  readTotalFileWords,
  readEachFileWords,
}
```

:::

::::




æ¥ç€ç»§ç»­åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºç¬¬ä¸‰ä¸ªæ–‡ä»¶ `utils.js`ï¼Œè¯¥æ–‡ä»¶ç”¨äºè®¡ç®— <mark>å·²è¿è¡Œæ—¶é—´</mark> å’Œ <mark>æœ€åæ´»åŠ¨æ—¶é—´</mark>ã€‚

æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```js
// æ—¥æœŸæ ¼å¼åŒ–(åªè·å–å¹´æœˆæ—¥)
export function dateFormat(date) {
  if (!(date instanceof Date)) {
    date = new Date(date);
  }
  return `${date.getUTCFullYear()}-${zero(date.getUTCMonth() + 1)}-${zero(date.getUTCDate())}`;
}

// å°äº10è¡¥0
export function zero(d) {
  return d.toString().padStart(2, '0');
}

/**
 * è®¡ç®—æœ€åæ´»åŠ¨æ—¶é—´
 */
export function lastUpdatePosts(posts) {
  posts.sort((prev, next) => {
    return compareDate(prev, next);
  });
  return posts;
}

// è·å–æ—¶é—´çš„æ—¶é—´æˆ³
export function getTimeNum(post) {
  let dateStr = post.lastUpdated || post.frontmatter.date;
  let date = new Date(dateStr);
  if (date == "Invalid Date" && dateStr) { // ä¿®å¤new Date()åœ¨Safariä¸‹å‡ºç°Invalid Dateçš„é—®é¢˜
    date = new Date(dateStr.replace(/-/g, '/'));
  }
  return date.getTime();
}

// æ¯”å¯¹æ—¶é—´
export function compareDate(a, b) {
  return getTimeNum(b) - getTimeNum(a);
}

/**
 * è·å–ä¸¤ä¸ªæ—¥æœŸç›¸å·®å¤šå°‘å¤©
 */
export function dayDiff(startDate, endDate) {
  if (!endDate) {
    endDate = startDate;
    startDate = new Date();
  }
  startDate = dateFormat(startDate);
  endDate = dateFormat(endDate);
  let day = parseInt(Math.abs(new Date(startDate) - new Date(endDate)) / (1000 * 60 * 60 * 24));
  return day;
}

/**
 * è®¡ç®—ç›¸å·®å¤šå°‘å¹´/æœˆ/æ—¥/æ—¶/åˆ†/ç§’
 */
export function timeDiff(startDate, endDate) {
  if (!endDate) {
    endDate = startDate;
    startDate = new Date();
  }
  if (!(startDate instanceof Date)) {
    startDate = new Date(startDate);
  }
  if (!(endDate instanceof Date)) {
    endDate = new Date(endDate);
  }
  // è®¡ç®—æ—¶é—´æˆ³çš„å·®
  const diffValue = parseInt((Math.abs(endDate - startDate) / 1000));
  if (diffValue == 0) {
    return 'åˆšåˆš';
  } else if (diffValue < 60) {
    return diffValue + ' ç§’';
  } else if (parseInt(diffValue / 60) < 60) {
    return parseInt(diffValue / 60) + ' åˆ†';
  } else if (parseInt(diffValue / (60 * 60)) < 24) {
    return parseInt(diffValue / (60 * 60)) + ' æ—¶';
  } else if (parseInt(diffValue / (60 * 60 * 24)) < getDays(startDate.getMonth, startDate.getFullYear)) {
    return parseInt(diffValue / (60 * 60 * 24)) + ' å¤©';
  } else if (parseInt(diffValue / (60 * 60 * 24 * getDays(startDate.getMonth, startDate.getFullYear))) < 12) {
    return parseInt(diffValue / (60 * 60 * 24 * getDays(startDate.getMonth, startDate.getFullYear))) + ' æœˆ';
  } else {
    return parseInt(diffValue / (60 * 60 * 24 * getDays(startDate.getMonth, startDate.getFullYear) * 12)) + ' å¹´';
  }
}

/**
 * åˆ¤æ–­å½“å‰æœˆçš„å¤©æ•°ï¼ˆ28ã€29ã€30ã€31ï¼‰
 */
export function getDays(mouth, year) {
  let days = 30;
  if (mouth === 2) {
    days = year % 4 === 0 ? 29 : 28;
  } else if (mouth === 1 || mouth === 3 || mouth === 5 || mouth === 7 || mouth === 8 || mouth === 10 || mouth === 12) {
    // æœˆä»½ä¸ºï¼š1,3,5,7,8,10,12 æ—¶ï¼Œä¸ºå¤§æœˆ.åˆ™å¤©æ•°ä¸º 31ï¼›
    days = 31;
  }
  return days;
}
```

ç›®å‰å°±ä¸‰ä¸ªæ–‡ä»¶ï¼Œæœ€ç»ˆæ•ˆæœå¦‚å›¾ï¼š

![image-20220607184317549](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220607184319.png)

### ç«™ç‚¹ä¿¡æ¯ä»£ç 

è¿™ä¸€æ­¥çš„æ–‡ä»¶ç›®å½•ä¸èƒ½éšä¾¿ç§»åŠ¨ï¼Œå› ä¸ºè¯¥ç›®å½•æ˜¯ Vuepress è§„å®šçš„ã€‚

é¦–å…ˆè¿›å…¥ docs/.vuepress ç›®å½•ï¼Œåˆ›å»º components æ–‡ä»¶å¤¹

![image-20220101193210129](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220101193212.png)



åˆ›å»ºä¸€ä¸ª vue æ–‡ä»¶ï¼š`WebInfo.vue`ï¼Œè¿™å°±æ˜¯é¦–é¡µçš„ç«™ç‚¹ä¿¡æ¯æ¨¡å—ã€‚

å¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```vue
<template>
  <!-- Young Kbt -->
  <div class="web-info card-box">
    <div class="webinfo-title">
      <i
        class="iconfont icon-award"
        style="font-size: 0.875rem; font-weight: 900; width: 1.25em"
      ></i>
      <span>ç«™ç‚¹ä¿¡æ¯</span>
    </div>
    <div class="webinfo-item">
      <div class="webinfo-item-title">æ–‡ç« æ•°ç›®ï¼š</div>
      <div class="webinfo-content">{{ mdFileCount }} ç¯‡</div>
    </div>

    <div class="webinfo-item">
      <div class="webinfo-item-title">å·²è¿è¡Œæ—¶é—´ï¼š</div>
      <div class="webinfo-content">
        {{ createToNowDay != 0 ? createToNowDay + " å¤©" : "ä¸åˆ°ä¸€å¤©" }}
      </div>
    </div>

    <div class="webinfo-item">
      <div class="webinfo-item-title">æœ¬ç«™æ€»å­—æ•°ï¼š</div>
      <div class="webinfo-content">{{ totalWords }} å­—</div>
    </div>

    <div class="webinfo-item">
      <div class="webinfo-item-title">æœ€åæ´»åŠ¨æ—¶é—´ï¼š</div>
      <div class="webinfo-content">
        {{ lastActiveDate == "åˆšåˆš" ? "åˆšåˆš" : lastActiveDate + "å‰" }}
      </div>
    </div>

    <div v-if="indexView" class="webinfo-item">
      <div class="webinfo-item-title">æœ¬ç«™è¢«è®¿é—®äº†ï¼š</div>
      <div class="webinfo-content">
        <span id="busuanzi_value_site_pv" class="web-site-pv"
          ><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading"></i>
        </span>
        æ¬¡
      </div>
    </div>

    <div v-if="indexView" class="webinfo-item">
      <div class="webinfo-item-title">æ‚¨çš„è®¿é—®æ’åï¼š</div>
      <div class="webinfo-content busuanzi">
        <span id="busuanzi_value_site_uv" class="web-site-uv"
          ><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading"></i>
        </span>
        å
      </div>
    </div>
  </div>
</template>

<script>
import { dayDiff, timeDiff, lastUpdatePosts } from "../webSiteInfo/utils";
import fetch from "../webSiteInfo/busuanzi"; // ç»Ÿè®¡é‡
export default {
  data() {
    return {
      // Young Kbt
      mdFileCount: 0, // markdown æ–‡æ¡£æ€»æ•°
      createToNowDay: 0, // åšå®¢åˆ›å»ºæ—¶é—´è·ä»Šå¤šå°‘å¤©
      lastActiveDate: "", // æœ€åæ´»åŠ¨æ—¶é—´
      totalWords: 0, // æœ¬ç«™æ€»å­—æ•°
      indexView: true, // å¼€å¯è®¿é—®é‡å’Œæ’åç»Ÿè®¡
    };
  },
  computed: {
    $lastUpdatePosts() {
      return lastUpdatePosts(this.$filterPosts);
    },
  },
  mounted() {
    // Young Kbt
    if (Object.keys(this.$themeConfig.blogInfo).length > 0) {
      const {
        blogCreate,
        mdFileCountType,
        totalWords,
        moutedEvent,
        eachFileWords,
        indexIteration,
        indexView,
      } = this.$themeConfig.blogInfo;
      this.createToNowDay = dayDiff(blogCreate);
      if (mdFileCountType != "archives") {
        this.mdFileCount = mdFileCountType.length;
      } else {
        this.mdFileCount = this.$filterPosts.length;
      }
      if (totalWords == "archives" && eachFileWords) {
        let archivesWords = 0;
        eachFileWords.forEach((itemFile) => {
          if (itemFile.wordsCount < 1000) {
            archivesWords += itemFile.wordsCount;
          } else {
            let wordsCount = itemFile.wordsCount.slice(
              0,
              itemFile.wordsCount.length - 1
            );
            archivesWords += wordsCount * 1000;
          }
        });
        this.totalWords = Math.round(archivesWords / 100) / 10 + "k";
      } else if (totalWords == "archives") {
        this.totalWords = 0;
        console.log(
          "å¦‚æœ totalWords = 'archives'ï¼Œå¿…é¡»ä¼ å…¥ eachFileWordsï¼Œæ˜¾ç„¶æ‚¨å¹¶æ²¡æœ‰ä¼ å…¥ï¼"
        );
      } else {
        this.totalWords = totalWords;
      }
      // æœ€åä¸€æ¬¡æ´»åŠ¨æ—¶é—´
      this.lastActiveDate = timeDiff(this.$lastUpdatePosts[0].lastUpdated);
      this.mountedWebInfo(moutedEvent);
      // è·å–è®¿é—®é‡å’Œæ’å
      this.indexView = indexView == undefined ? true : indexView;
      if (this.indexView) {
        this.getIndexViewCouter(indexIteration);
      }
    }
  },
  methods: {
    /**
     * æŒ‚è½½ç«™ç‚¹ä¿¡æ¯æ¨¡å—
     */
    mountedWebInfo(moutedEvent = ".tags-wrapper") {
      let interval = setInterval(() => {
        const tagsWrapper = document.querySelector(moutedEvent);
        const webInfo = document.querySelector(".web-info");
        if (tagsWrapper && webInfo) {
          if (!this.isSiblilngNode(tagsWrapper, webInfo)) {
            tagsWrapper.parentNode.insertBefore(
              webInfo,
              tagsWrapper.nextSibling
            );
            clearInterval(interval);
          }
        }
      }, 200);
    },
    /**
     * æŒ‚è½½åœ¨å…„å¼Ÿå…ƒç´ åé¢ï¼Œè¯´æ˜å½“å‰ç»„ä»¶æ˜¯ siblingNode å˜é‡
     */
    isSiblilngNode(element, siblingNode) {
      if (element.siblingNode == siblingNode) {
        return true;
      } else {
        return false;
      }
    },
    /**
     * é¦–é¡µçš„ç»Ÿè®¡é‡
     */
    getIndexViewCouter(iterationTime = 3000) {
      fetch();
      var i = 0;
      var defaultCouter = "9999";
      // å¦‚æœåªéœ€è¦ç¬¬ä¸€æ¬¡è·å–æ•°æ®ï¼ˆå¯èƒ½è·å–å¤±è´¥ï¼‰ï¼Œå¯æ³¨é‡Šæ‰ setTimeout å†…å®¹ï¼Œæ­¤å†…å®¹æ˜¯ç¬¬ä¸€æ¬¡è·å–å¤±è´¥åï¼Œé‡æ–°è·å–è®¿é—®é‡
      // å¯èƒ½ä¼šå¯¼è‡´è®¿é—®é‡å†æ¬¡ + 1 åŸå› ï¼šå–å†³äº setTimeout çš„æ—¶é—´ï¼ˆéœ€æ±‚è°ƒèŠ‚ï¼‰ï¼ŒsetTimeout å¤ªå¿«å¯¼è‡´ç¬¬ä¸€ä¸ªè·å–çš„æ•°æ®æ²¡è¿”å›ï¼Œå°±ç¬¬äºŒæ¬¡è·å–ï¼Œå¯¼è‡´ç»“æœè¿”å› + 2 çš„æ•°æ®
      setTimeout(() => {
        let indexUv = document.querySelector(".web-site-pv");
        let indexPv = document.querySelector(".web-site-uv");
        if (
          indexPv &&
          indexUv &&
          indexPv.innerText == "" &&
          indexUv.innerText == ""
        ) {
          let interval = setInterval(() => {
            // å†æ¬¡åˆ¤æ–­åŸå› ï¼šé˜²æ­¢è¿›å…¥ setInterval çš„ç¬é—´ï¼Œè®¿é—®é‡è·å–æˆåŠŸ
            if (
              indexPv &&
              indexUv &&
              indexPv.innerText == "" &&
              indexUv.innerText == ""
            ) {
              i += iterationTime;
              if (i > iterationTime * 5) {
                indexPv.innerText = defaultCouter;
                indexUv.innerText = defaultCouter;
                clearInterval(interval); // 5 æ¬¡åæ— æ³•è·å–ï¼Œåˆ™å–æ¶ˆè·å–
              }
              if (indexPv.innerText == "" && indexUv.innerText == "") {
                // æ‰‹åŠ¨è·å–è®¿é—®é‡
                fetch();
              } else {
                clearInterval(interval);
              }
            } else {
              clearInterval(interval);
            }
          }, iterationTime);
          // ç»‘å®š beforeDestroy ç”Ÿå‘½é’©å­ï¼Œæ¸…é™¤å®šæ—¶å™¨
          this.$once("hook:beforeDestroy", () => {
            clearInterval(interval);
            interval = null;
          });
        }
      }, iterationTime);
    },
    beforeMount() {
      let webInfo = document.querySelector(".web-info");
      webInfo && webInfo.parentNode.removeChild(webInfo);
    },
  },
};
</script>

<style scoped>
.web-info {
  font-size: 0.875rem;
  padding: 0.95rem;
}
.webinfo-title {
  text-align: center;
  color: #888;
  font-weight: bold;
  padding: 0 0 10px 0;
}
.webinfo-item {
  padding: 8px 0 0;
  margin: 0;
}
.webinfo-item-title {
  display: inline-block;
}
.webinfo-content {
  display: inline-block;
  float: right;
}
@keyframes turn {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.loading {
  display: inline-block;
  animation: turn 1s linear infinite;
  -webkit-animation: turn 1s linear infinite;
}
</style>
```

ç»§ç»­åˆ›å»ºä¸€ä¸ª vue æ–‡ä»¶ï¼š`PageInfo.vue`ï¼Œè¿™å°±æ˜¯æ–‡ç« é¡µçš„ä¿¡æ¯æ¨¡å—ï¼š<mark>æ–‡ç« æµè§ˆé‡ã€å­—æ•°ä»£ç ã€é¢„é˜…è¯»æ—¶é—´</mark>ã€‚

```vue
<template></template>

<script>
import fetch from "../webSiteInfo/busuanzi";
export default {
  mounted() {
    // é¦–é¡µä¸åˆå§‹é¡µé¢ä¿¡æ¯
    if (this.$route.path != "/") {
      this.initPageInfo();
    }
  },
  watch: {
    $route(to, from) {
      // å¦‚æœé¡µé¢æ˜¯éé¦–é¡µï¼Œ# å·ä¹Ÿä¼šè§¦å‘è·¯ç”±å˜åŒ–ï¼Œè¿™é‡Œè¦æ’é™¤æ‰
      if (
        to.path !== "/" &&
        to.path !== from.path &&
        this.$themeConfig.blogInfo
      ) {
        this.initPageInfo();
      }
    },
  },
  methods: {
    /**
     * åˆå§‹åŒ–é¡µé¢ä¿¡æ¯
     */
    initPageInfo() {
      if (this.$frontmatter.article == undefined || this.$frontmatter.article) {
        // æ’é™¤æ‰ article ä¸º false çš„æ–‡ç« 
        const { eachFileWords, pageView, pageIteration, readingTime } =
          this.$themeConfig.blogInfo;
        // ä¸‹é¢ä¸¤ä¸ª if å¯ä»¥è°ƒæ¢ä½ç½®ï¼Œä»è€Œè®©æ–‡ç« çš„æµè§ˆé‡å’Œå­—æ•°äº¤æ¢ä½ç½®
        if (eachFileWords) {
          try {
            eachFileWords.forEach((itemFile) => {
              if (itemFile.permalink == this.$frontmatter.permalink) {
                // this.addPageWordsCount å’Œ if å¯ä»¥è°ƒæ¢ä½ç½®ï¼Œä»è€Œè®©æ–‡ç« çš„å­—æ•°å’Œé¢„é˜…è¯»æ—¶é—´äº¤æ¢ä½ç½®
                this.addPageWordsCount(itemFile.wordsCount);
                if (readingTime || readingTime == undefined) {
                  this.addReadTimeCount(itemFile.readingTime);
                }
                throw new Error();
              }
            });
          } catch (error) {}
        }
        if (pageView || pageView == undefined) {
          this.addPageView();
          this.getPageViewCouter(pageIteration);
        }
        return;
      }
    },
    /**
     * æ–‡ç« é¡µçš„è®¿é—®é‡
     */
    getPageViewCouter(iterationTime = 3000) {
      fetch();
      let i = 0;
      var defaultCouter = "9999";
      // å¦‚æœåªéœ€è¦ç¬¬ä¸€æ¬¡è·å–æ•°æ®ï¼ˆå¯èƒ½è·å–å¤±è´¥ï¼‰ï¼Œå¯æ³¨é‡Šæ‰ setTimeout å†…å®¹ï¼Œæ­¤å†…å®¹æ˜¯ç¬¬ä¸€æ¬¡è·å–å¤±è´¥åï¼Œé‡æ–°è·å–è®¿é—®é‡
      // å¯èƒ½ä¼šå¯¼è‡´è®¿é—®é‡å†æ¬¡ + 1 åŸå› ï¼šå–å†³äº setTimeout çš„æ—¶é—´ï¼ˆéœ€æ±‚è°ƒèŠ‚ï¼‰ï¼ŒsetTimeout å¤ªå¿«å¯¼è‡´ç¬¬ä¸€ä¸ªè·å–çš„æ•°æ®æ²¡è¿”å›ï¼Œå°±ç¬¬äºŒæ¬¡è·å–ï¼Œå¯¼è‡´ç»“æœè¿”å› + 2 çš„æ•°æ®
      setTimeout(() => {
        let pageView = document.querySelector(".view-data");
        if (pageView && pageView.innerText == "") {
          let interval = setInterval(() => {
            // å†æ¬¡åˆ¤æ–­åŸå› ï¼šé˜²æ­¢è¿›å…¥ setInterval çš„ç¬é—´ï¼Œè®¿é—®é‡è·å–æˆåŠŸ
            if (pageView && pageView.innerText == "") {
              i += iterationTime;
              if (i > iterationTime * 5) {
                pageView.innerText = defaultCouter;
                clearInterval(interval); // 5 æ¬¡åæ— æ³•è·å–ï¼Œåˆ™å–æ¶ˆè·å–
              }
              if (pageView.innerText == "") {
                // æ‰‹åŠ¨è·å–è®¿é—®é‡
                fetch();
              } else {
                clearInterval(interval);
              }
            } else {
              clearInterval(interval);
            }
          }, iterationTime);
          // ç»‘å®š beforeDestroy ç”Ÿå‘½é’©å­ï¼Œæ¸…é™¤å®šæ—¶å™¨
          this.$once("hook:beforeDestroy", () => {
            clearInterval(interval);
            interval = null;
          });
        }
      }, iterationTime);
    },
    /**
     * æ·»åŠ æµè§ˆé‡å…ƒç´ 
     */
    addPageView() {
      let pageView = document.querySelector(".page-view");
      if (pageView) {
        pageView.innerHTML =
          '<a style="color: #888; margin-left: 3px" href="javascript:;" id="busuanzi_value_page_pv" class="view-data"><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading"></i></a>';
      } else {
        // åˆ›å»ºè®¿é—®é‡çš„å…ƒç´ 
        let template = document.createElement("div");
        template.title = "æµè§ˆé‡";
        template.className = "page-view iconfont icon-view";
        template.style.float = "left";
        template.style.marginLeft = "20px";
        template.style.fontSize = "0.8rem";
        template.innerHTML =
          '<a style="color: #888; margin-left: 3px" href="javascript:;" id="busuanzi_value_page_pv" class="view-data"><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading"></i></a>';
        // æ·»åŠ  loading æ•ˆæœ
        let style = document.createElement("style");
        style.innerHTML = `@keyframes turn {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .loading {
        display: inline-block;
        animation: turn 1s linear infinite;
        -webkit-animation: turn 1s linear infinite;
      }`;
        document.head.appendChild(style);
        this.mountedView(template);
      }
    },
    /**
     * æ·»åŠ å½“å‰æ–‡ç« é¡µçš„å­—æ•°å…ƒç´ 
     */
    addPageWordsCount(wordsCount = 0) {
      let words = document.querySelector(".book-words");
      if (words) {
        words.innerHTML = `<a href="javascript:;" style="margin-left: 3px; color: #888">${wordsCount}</a>`;
      } else {
        let template = document.createElement("div");
        template.title = "æ–‡ç« å­—æ•°";
        template.className = "book-words iconfont icon-book";
        template.style.float = "left";
        template.style.marginLeft = "20px";
        template.style.fontSize = "0.8rem";

        template.innerHTML = `<a href="javascript:;" style="margin-left: 3px; color: #888">${wordsCount}</a>`;
        this.mountedView(template);
      }
    },
    /**
     * æ·»åŠ é¢„è®¡çš„é˜…è¯»æ—¶é—´
     */
    addReadTimeCount(readTimeCount = 0) {
      let reading = document.querySelector(".reading-time");
      if (reading) {
        reading.innerHTML = `<a href="javascript:;" style="margin-left: 3px; color: #888">${readTimeCount}</a>`;
      } else {
        let template = document.createElement("div");
        template.title = "é¢„é˜…è¯»æ—¶é•¿";
        template.className = "reading-time iconfont icon-shijian";
        template.style.float = "left";
        template.style.marginLeft = "20px";
        template.style.fontSize = "0.8rem";
        template.innerHTML = `<a href="javascript:;" style="margin-left: 3px; color: #888">${readTimeCount}</a>`;
        this.mountedView(template);
      }
    },
    /**
     * æŒ‚è½½ç›®æ ‡åˆ°é¡µé¢ä¸Š
     */
    mountedView(
      template,
      mountedIntervalTime = 100,
      moutedParentEvent = ".articleInfo-wrap > .articleInfo > .info"
    ) {
      let i = 0;
      let parentElement = document.querySelector(moutedParentEvent);
      if (parentElement) {
        if (!this.isMountedView(template, parentElement)) {
          parentElement.appendChild(template);
        }
      } else {
        let interval = setInterval(() => {
          parentElement = document.querySelector(moutedParentEvent);
          if (parentElement) {
            if (!this.isMountedView(template, parentElement)) {
              parentElement.appendChild(template);
              clearInterval(interval);
            }
          } else if (i > 1 * 10) {
            // 10 ç§’åæ¸…é™¤
            clearInterval(interval);
          }
        }, mountedIntervalTime);
        // ç»‘å®š beforeDestroy ç”Ÿå‘½é’©å­ï¼Œæ¸…é™¤å®šæ—¶å™¨
        this.$once("hook:beforeDestroy", () => {
          clearInterval(interval);
          interval = null;
        });
      }
    },
    /**
     * å¦‚æœå…ƒç´ å­˜åœ¨ï¼Œåˆ™åˆ é™¤
     */
    removeElement(selector) {
      var element = document.querySelector(selector);
      element && element.parentNode.removeChild(element);
    },
    /**
     * ç›®æ ‡æ˜¯å¦å·²ç»æŒ‚è½½åœ¨é¡µé¢ä¸Š
     */
    isMountedView(element, parentElement) {
      if (element.parentNode == parentElement) {
        return true;
      } else {
        return false;
      }
    },
  },
  // é˜²æ­¢é‡å†™ç¼–è¯‘æ—¶ï¼Œå¯¼è‡´é¡µé¢ä¿¡æ¯é‡å¤å‡ºç°é—®é¢˜
  beforeMount() {
    clearInterval(this.interval);
    this.removeElement(".page-view");
    this.removeElement(".book-words");
    this.removeElement(".reading-time");
  },
};
</script>

<style></style>
```

æœ€ç»ˆæ•ˆæœå¦‚å›¾ï¼š

![image-20220607184354072](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220607184355.png)

åˆ›å»ºå¥½äº†ä¸¤ä¸ª vue ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å®ƒä»¬ã€‚

> ä½¿ç”¨ `WebInfo.vue` ç»„ä»¶

æ‰“å¼€ docs/index.md

![image-20220101193622169](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220101193623.png)

ç§»åˆ°æœ€ä¸‹æ–¹ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```vue
<ClientOnly>
  <WebInfo/>
</ClientOnly>
```

> ä½¿ç”¨ `PageInfo.vue` ç»„ä»¶

åœ¨ docs/.vuepress/config.jsï¼ˆæ–°ç‰ˆæ˜¯ config.tsï¼‰çš„ plugins ä¸­æ·»åŠ é…ç½®ã€‚

:::: tabs :options="{ useUrlFragment: false }"

::: tab JS

```js
module.exports = {
    plugins: [
        {
            name: 'custom-plugins',
            globalUIComponents: ["PageInfo"] // 2.x ç‰ˆæœ¬ globalUIComponents æ”¹åä¸º clientAppRootComponentFiles
        }
    ]
}
```

:::

::: tab TS

```tsx
import { UserPlugins } from 'vuepress/config'
plugins: <UserPlugins>[
    [
    	{
        	name: 'custom-plugins',
        	globalUIComponents: ["PageInfo"] // 2.x ç‰ˆæœ¬ globalUIComponents æ”¹åä¸º clientAppRootComponentFiles
    	}
    ]
]
```

:::

::::

### ç«™ç‚¹ä¿¡æ¯é…ç½®

ä¸Šé¢éƒ½æŒ‰ç…§æ­¥éª¤å†™å¥½ä»£ç ã€ä½¿ç”¨ç»„ä»¶äº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥èµ°æœ€åä¸€æ­¥é…ç½®æˆ‘ä»¬çš„ç«™ç‚¹ä¿¡æ¯ã€‚

è¿›å…¥åˆ° docs/.vuepress/config.jsï¼ˆæ–°ç‰ˆä¸º config.tsï¼‰æ–‡ä»¶ã€‚

å¼•å…¥ä¹‹å‰å†™å¥½çš„å·¥å…·ä»£ç æ–‡ä»¶ï¼šï¼ˆè·¯å¾„è¦å‡†ç¡®ï¼Œè¿™é‡Œä»…ä»…æ˜¯æ¨¡æ¿ï¼‰

:::: tabs :options="{ useUrlFragment: false }"

::: tab JS

```js
const { readFileList, readTotalFileWords, readEachFileWords } = require('./webSiteInfo/readFile');
```

:::

::: tab TS

```tsx
import { readFileList, readTotalFileWords, readEachFileWords } from './webSiteInfo/readFile';
```

:::

::::



å¦‚å›¾ï¼ˆæ¼”ç¤º JS ä»£ç å—ï¼‰ï¼š

![image-20220103124132339](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220103124134.png)

åœ¨ themeConfig ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```js
// ç«™ç‚¹é…ç½®ï¼ˆé¦–é¡µ & æ–‡ç« é¡µï¼‰
blogInfo: {
  blogCreate: '2021-10-19', // åšå®¢åˆ›å»ºæ—¶é—´
  indexView: true,  // å¼€å¯é¦–é¡µçš„è®¿é—®é‡å’Œæ’åç»Ÿè®¡ï¼Œé»˜è®¤ trueï¼ˆå¼€å¯ï¼‰
  pageView: true,  // å¼€å¯æ–‡ç« é¡µçš„æµè§ˆé‡ç»Ÿè®¡ï¼Œé»˜è®¤ trueï¼ˆå¼€å¯ï¼‰
  readingTime: true,  // å¼€å¯æ–‡ç« é¡µçš„é¢„è®¡é˜…è¯»æ—¶é—´ï¼Œæ¡ä»¶ï¼šå¼€å¯ eachFileWordsï¼Œé»˜è®¤ trueï¼ˆå¼€å¯ï¼‰ã€‚å¯åœ¨ eachFileWords çš„ readEachFileWords çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°è‡ªå®šä¹‰ï¼Œé»˜è®¤ 1 åˆ†é’Ÿ 300 ä¸­æ–‡ã€160 è‹±æ–‡
  eachFileWords: readEachFileWords([''], 300, 160),  // å¼€å¯æ¯ä¸ªæ–‡ç« é¡µçš„å­—æ•°ã€‚readEachFileWords(['xx']) å…³é—­ xx ç›®å½•ï¼ˆå¯å¤šä¸ªï¼Œå¯ä¸ä¼ å‚æ•°ï¼‰ä¸‹çš„æ–‡ç« é¡µå­—æ•°å’Œé˜…è¯»æ—¶é•¿ï¼Œåé¢ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ 1 åˆ†é’Ÿé‡Œèƒ½é˜…è¯»çš„ä¸­æ–‡å­—æ•°å’Œè‹±æ–‡å­—æ•°ã€‚æ— é»˜è®¤å€¼ã€‚readEachFileWords() æ–¹æ³•é»˜è®¤æ’é™¤äº† article ä¸º false çš„æ–‡ç« 
  mdFileCountType: 'archives',  // å¼€å¯æ–‡æ¡£æ•°ã€‚1. archives è·å–å½’æ¡£çš„æ–‡æ¡£æ•°ï¼ˆé»˜è®¤ï¼‰ã€‚2. æ•°ç»„ readFileList(['xx']) æ’é™¤ xx ç›®å½•ï¼ˆå¯å¤šä¸ªï¼Œå¯ä¸ä¼ å‚æ•°ï¼‰ï¼Œè·å–å…¶ä»–ç›®å½•çš„æ–‡æ¡£æ•°ã€‚æç¤ºï¼šreadFileList() è·å– docs ä¸‹æ‰€æœ‰çš„ md æ–‡æ¡£ï¼ˆé™¤äº† `.vuepress` å’Œ `@pages` ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼‰
  totalWords: 'archives',  // å¼€å¯æœ¬ç«™æ–‡æ¡£æ€»å­—æ•°ã€‚1. archives è·å–å½’æ¡£çš„æ–‡æ¡£æ•°ï¼ˆä½¿ç”¨ archives æ¡ä»¶ï¼šä¼ å…¥ eachFileWordsï¼Œå¦åˆ™æŠ¥é”™ï¼‰ã€‚2. readTotalFileWords(['xx']) æ’é™¤ xx ç›®å½•ï¼ˆå¯å¤šä¸ªï¼Œå¯ä¸ä¼ å‚æ•°ï¼‰ï¼Œè·å–å…¶ä»–ç›®å½•çš„æ–‡ç« å­—æ•°ã€‚æ— é»˜è®¤å€¼
  moutedEvent: '.tags-wrapper',   // é¦–é¡µçš„ç«™ç‚¹æ¨¡å—æŒ‚è½½åœ¨æŸä¸ªå…ƒç´ åé¢ï¼ˆæ”¯æŒå¤šç§é€‰æ‹©å™¨ï¼‰ï¼ŒæŒ‡çš„æ˜¯æŒ‚è½½åœ¨å“ªä¸ªå…„å¼Ÿå…ƒç´ çš„åé¢ï¼Œé»˜è®¤æ˜¯çƒ­é—¨æ ‡ç­¾ '.tags-wrapper' ä¸‹é¢ï¼Œæç¤ºï¼š'.categories-wrapper' ä¼šæŒ‚è½½åœ¨æ–‡ç« åˆ†ç±»ä¸‹é¢ã€‚'.blogger-wrapper' ä¼šæŒ‚è½½åœ¨åšå®¢å¤´åƒæ¨¡å—ä¸‹é¢
  // ä¸‹é¢ä¸¤ä¸ªé€‰é¡¹ï¼šç¬¬ä¸€æ¬¡è·å–è®¿é—®é‡å¤±è´¥åçš„è¿­ä»£æ—¶é—´
  indexIteration: 2500,   // å¦‚æœé¦–é¡µè·å–è®¿é—®é‡å¤±è´¥ï¼Œåˆ™æ¯éš”å¤šå°‘æ—¶é—´åè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œç›´åˆ°è·å–æˆåŠŸæˆ–è·å– 10 æ¬¡åã€‚é»˜è®¤ 3 ç§’ã€‚æ³¨æ„ï¼šè®¾ç½®æ—¶é—´å¤ªä½ï¼Œå¯èƒ½å¯¼è‡´è®¿é—®é‡ + 2ã€+ 3 ......
  pageIteration: 2500,    // å¦‚æœæ–‡ç« é¡µè·å–è®¿é—®é‡å¤±è´¥ï¼Œåˆ™æ¯éš”å¤šå°‘æ—¶é—´åè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œç›´åˆ°è·å–æˆåŠŸæˆ–è·å– 10 æ¬¡åã€‚é»˜è®¤ 3 ç§’ã€‚æ³¨æ„ï¼šè®¾ç½®æ—¶é—´å¤ªä½ï¼Œå¯èƒ½å¯¼è‡´è®¿é—®é‡ + 2ã€+ 3 ......
  // è¯´æ˜ï¼šæˆåŠŸè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œè®¿é—®é‡ + 1ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡è·å–å¤±è´¥åï¼Œè®¾ç½®çš„æ¯ä¸ªéš”æ®µé‡æ–°è·å–æ—¶é—´ï¼Œå°†ä¼šå½±å“è®¿é—®é‡çš„æ¬¡æ•°ã€‚å¦‚ 100 å¯èƒ½æ¯æ¬¡è·å–è®¿é—®é‡ + 3
},
```

å¦‚å›¾ï¼ˆå›¾ç‰‡å†…å®¹ä¸ä¸€å®šæ˜¯æœ€æ–°ï¼Œæœ€æ–°çš„æ˜¯ä»£ç å—å†…å®¹ï¼‰ï¼š

![image-20220104192821504](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220104192822.png)

å±æ€§é…ç½®çš„å…·ä½“ä»‹ç»è¯·çœ‹ [å±æ€§é…ç½®](#å±æ€§é…ç½®)ã€‚

## æœ¬åœ°ä¸»é¢˜

å¦‚æœå·²ç»çœ‹å®Œäº†åœ¨çº¿ä¸»é¢˜çš„å†…å®¹ï¼Œå…¶å®æœ¬å†…å®¹çš„å¤§å°ä¸å˜ï¼Œåªæ˜¯ä½ç½®å˜æ¢ã€ä¸€äº›ä»£ç é‡ç»„ã€‚

**é…ç½®äº†åœ¨çº¿ä¸»é¢˜ï¼Œå°±ä¸éœ€è¦é…ç½®æœ¬åœ°ä¸»é¢˜ï¼Œåä¹‹äº¦ç„¶ã€‚**

### å·¥å…·ç±»

åœ¨ vdoing/util ç›®å½•ä¸‹åˆ›å»º `webSiteInfo.js`ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```js
// æ—¥æœŸæ ¼å¼åŒ–(åªè·å–å¹´æœˆæ—¥)
export function dateFormat(date) {
  if (!(date instanceof Date)) {
    date = new Date(date);
  }
  return `${date.getUTCFullYear()}-${zero(date.getUTCMonth() + 1)}-${zero(date.getUTCDate())}`;
}

// å°äº10è¡¥0
export function zero(d) {
  return d.toString().padStart(2, '0');
}

/**
 * è®¡ç®—æœ€åæ´»åŠ¨æ—¶é—´
 */
export function lastUpdatePosts(posts) {
  posts.sort((prev, next) => {
    return compareDate(prev, next);
  });
  return posts;
}

// è·å–æ—¶é—´çš„æ—¶é—´æˆ³
export function getTimeNum(post) {
  let dateStr = post.lastUpdated || post.frontmatter.date;
  let date = new Date(dateStr);
  if (date == "Invalid Date" && dateStr) { // ä¿®å¤new Date()åœ¨Safariä¸‹å‡ºç°Invalid Dateçš„é—®é¢˜
    date = new Date(dateStr.replace(/-/g, '/'));
  }
  return date.getTime();
}

// æ¯”å¯¹æ—¶é—´
export function compareDate(a, b) {
  return getTimeNum(b) - getTimeNum(a);
}

/**
 * è·å–ä¸¤ä¸ªæ—¥æœŸç›¸å·®å¤šå°‘å¤©
 */
export function dayDiff(startDate, endDate) {
  if (!endDate) {
    endDate = startDate;
    startDate = new Date();
  }
  startDate = dateFormat(startDate);
  endDate = dateFormat(endDate);
  let day = parseInt(Math.abs(new Date(startDate) - new Date(endDate)) / (1000 * 60 * 60 * 24));
  return day;
}

/**
 * è®¡ç®—ç›¸å·®å¤šå°‘å¹´/æœˆ/æ—¥/æ—¶/åˆ†/ç§’
 */
export function timeDiff(startDate, endDate) {
  if (!endDate) {
    endDate = startDate;
    startDate = new Date();
  }
  if (!(startDate instanceof Date)) {
    startDate = new Date(startDate);
  }
  if (!(endDate instanceof Date)) {
    endDate = new Date(endDate);
  }
  // è®¡ç®—æ—¶é—´æˆ³çš„å·®
  const diffValue = parseInt((Math.abs(endDate - startDate) / 1000));
  if (diffValue == 0) {
    return 'åˆšåˆš';
  } else if (diffValue < 60) {
    return diffValue + ' ç§’';
  } else if (parseInt(diffValue / 60) < 60) {
    return parseInt(diffValue / 60) + ' åˆ†';
  } else if (parseInt(diffValue / (60 * 60)) < 24) {
    return parseInt(diffValue / (60 * 60)) + ' æ—¶';
  } else if (parseInt(diffValue / (60 * 60 * 24)) < getDays(startDate.getMonth, startDate.getFullYear)) {
    return parseInt(diffValue / (60 * 60 * 24)) + ' å¤©';
  } else if (parseInt(diffValue / (60 * 60 * 24 * getDays(startDate.getMonth, startDate.getFullYear))) < 12) {
    return parseInt(diffValue / (60 * 60 * 24 * getDays(startDate.getMonth, startDate.getFullYear))) + ' æœˆ';
  } else {
    return parseInt(diffValue / (60 * 60 * 24 * getDays(startDate.getMonth, startDate.getFullYear) * 12)) + ' å¹´';
  }
}

/**
 * åˆ¤æ–­å½“å‰æœˆçš„å¤©æ•°ï¼ˆ28ã€29ã€30ã€31ï¼‰
 */
export function getDays(mouth, year) {
  let days = 30;
  if (mouth === 2) {
    days = year % 4 === 0 ? 29 : 28;
  } else if (mouth === 1 || mouth === 3 || mouth === 5 || mouth === 7 || mouth === 8 || mouth === 10 || mouth === 12) {
    // æœˆä»½ä¸ºï¼š1,3,5,7,8,10,12 æ—¶ï¼Œä¸ºå¤§æœˆ.åˆ™å¤©æ•°ä¸º 31ï¼›
    days = 31;
  }
  return days;
}

/**
 * å·²è¿è¡Œæ—¶é—´ä½äºä¸€å¤©æ˜¾ç¤ºæ—¶åˆ†ç§’
 * ç›®å‰è¯¥å‡½æ•°æ²¡æœ‰ä½¿ç”¨ï¼Œä½äºä¸€å¤©ç›´æ¥æ˜¾ç¤ºä¸åˆ°ä¸€å¤©
 */
export function getTime(startDate, endDate) {
  if (day < 0) {
    let hour = parseInt(Math.abs(new Date(startDate) - new Date(endDate)) / (1000 * 60 * 60));
    if (hour > 0) {
      let minute = parseInt(Math.abs(new Date(startDate) - new Date(endDate) - hour * 60 * 60 * 1000) / (1000 * 60));
      if (minute > 0) {
        let second = parseInt(Math.abs(new Date(startDate) - new Date(endDate) - hour * 60 * 60 * 1000 - minute * 60 * 1000) / (1000));
        if (second != 0) {
          return hour + ' å°æ—¶ ' + minute + ' åˆ†é’Ÿ ' + second + ' ç§’';
        } else {
          return hour + ' å°æ—¶ ' + minute + ' åˆ†é’Ÿ ';
        }
      } else {
        return hour + ' å°æ—¶ ';
      }
    } else {
      let minute = parseInt(Math.abs(new Date(startDate) - new Date(endDate) - hour * 60 * 60 * 1000) / (1000 * 60));
      if (minute > 0) {
        let second = parseInt(Math.abs(new Date(startDate) - new Date(endDate) - hour * 60 * 60 * 1000 - minute * 60 * 1000) / (1000));
        if (second != 0) {
          return + minute + ' åˆ†é’Ÿ ' + second + ' ç§’';
        } else {
          return minute + ' åˆ†é’Ÿ ';
        }
      } else {
        return parseInt(Math.abs(new Date(startDate) - new Date(endDate) - hour * 60 * 60 * 1000 - minute * 60 * 1000) / (1000)) + ' ç§’ ';
      }
    }
  }
}

var bszCaller, bszTag, scriptTag, ready;

var t,
  e,
  n,
  a = !1,
  c = [];

// ä¿®å¤NodeåŒæ„ä»£ç çš„é—®é¢˜
if (typeof document !== "undefined") {
  (ready = function (t) {
    return (
      a ||
      "interactive" === document.readyState ||
      "complete" === document.readyState
        ? t.call(document)
        : c.push(function () {
            return t.call(this);
          }),
      this
    );
  }),
    (e = function () {
      for (var t = 0, e = c.length; t < e; t++) c[t].apply(document);
      c = [];
    }),
    (n = function () {
      a ||
        ((a = !0),
        e.call(window),
        document.removeEventListener
          ? document.removeEventListener("DOMContentLoaded", n, !1)
          : document.attachEvent &&
            (document.detachEvent("onreadystatechange", n),
            window == window.top && (clearInterval(t), (t = null))));
    }),
    document.addEventListener
      ? document.addEventListener("DOMContentLoaded", n, !1)
      : document.attachEvent &&
        (document.attachEvent("onreadystatechange", function () {
          /loaded|complete/.test(document.readyState) && n();
        }),
        window == window.top &&
          (t = setInterval(function () {
            try {
              a || document.documentElement.doScroll("left");
            } catch (t) {
              return;
            }
            n();
          }, 5)));
}

bszCaller = {
  fetch: function (t, e) {
    var n = "BusuanziCallback_" + Math.floor(1099511627776 * Math.random());
    t = t.replace("=BusuanziCallback", "=" + n);
    (scriptTag = document.createElement("SCRIPT")),
      (scriptTag.type = "text/javascript"),
      (scriptTag.defer = !0),
      (scriptTag.src = t),
      document.getElementsByTagName("HEAD")[0].appendChild(scriptTag);
    window[n] = this.evalCall(e);
  },
  evalCall: function (e) {
    return function (t) {
      ready(function () {
        try {
          e(t),
            scriptTag &&
              scriptTag.parentElement &&
              scriptTag.parentElement.removeChild &&
              scriptTag.parentElement.removeChild(scriptTag);
        } catch (t) {
          console.log(t), bszTag.hides();
        }
      });
    };
  },
};

export function fetch() {
  bszTag && bszTag.hides();
  bszCaller.fetch("//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback", function (t) {
    bszTag.texts(t), bszTag.shows();
  })
};

bszTag = {
  bszs: ["site_pv", "page_pv", "site_uv"],
  texts: function (n) {
    this.bszs.map(function (t) {
      var e = document.getElementById("busuanzi_value_" + t);
      e && (e.innerHTML = n[t]);
    });
  },
  hides: function () {
    this.bszs.map(function (t) {
      var e = document.getElementById("busuanzi_container_" + t);
      e && (e.style.display = "none");
    });
  },
  shows: function () {
    this.bszs.map(function (t) {
      var e = document.getElementById("busuanzi_container_" + t);
      e && (e.style.display = "inline");
    });
  },
};
```

### Vueç»„ä»¶åˆ›å»º

éœ€è¦ä¸¤ä¸ª Vue ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯é¦–é¡µçš„ç«™ç‚¹ä¿¡æ¯æ¨¡å—å’Œæ–‡ç« é¡µä¿¡æ¯æ¨¡å—ã€‚

åœ¨ vdoing/components ç›®å½•ä¸‹åˆ›å»º `WebInfo.vue` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```vue
<template>
  <!-- Young Kbt -->
  <div class="web-info card-box">
    <div class="webinfo-title">
      <i
        class="iconfont icon-award"
        style="font-size: 0.875rem; font-weight: 900; width: 1.25em"
      ></i>
      <span>ç«™ç‚¹ä¿¡æ¯</span>
    </div>
    <div class="webinfo-item">
      <div class="webinfo-item-title">æ–‡ç« æ•°ç›®ï¼š</div>
      <div class="webinfo-content">{{ mdFileCount }} ç¯‡</div>
    </div>

    <div class="webinfo-item">
      <div class="webinfo-item-title">å·²è¿è¡Œæ—¶é—´ï¼š</div>
      <div class="webinfo-content">
        {{ createToNowDay != 0 ? createToNowDay + " å¤©" : "ä¸åˆ°ä¸€å¤©" }}
      </div>
    </div>

    <div class="webinfo-item">
      <div class="webinfo-item-title">æœ¬ç«™æ€»å­—æ•°ï¼š</div>
      <div class="webinfo-content">{{ totalWords }} å­—</div>
    </div>

    <div class="webinfo-item">
      <div class="webinfo-item-title">æœ€åæ´»åŠ¨æ—¶é—´ï¼š</div>
      <div class="webinfo-content">
        {{ lastActiveDate == "åˆšåˆš" ? "åˆšåˆš" : lastActiveDate + "å‰" }}
      </div>
    </div>

    <div v-if="indexView" class="webinfo-item">
      <div class="webinfo-item-title">æœ¬ç«™è¢«è®¿é—®äº†ï¼š</div>
      <div class="webinfo-content">
        <span id="busuanzi_value_site_pv" class="web-site-pv"
          ><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading"></i>
        </span>
        æ¬¡
      </div>
    </div>

    <div v-if="indexView" class="webinfo-item">
      <div class="webinfo-item-title">æ‚¨çš„è®¿é—®æ’åï¼š</div>
      <div class="webinfo-content busuanzi">
        <span id="busuanzi_value_site_uv" class="web-site-uv"
          ><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading"></i>
        </span>
        å
      </div>
    </div>
  </div>
</template>

<script>
import { dayDiff, timeDiff, lastUpdatePosts, fetch } from "../util/webSiteInfo";
export default {
  data() {
    return {
      // Young Kbt
      mdFileCount: 0, // markdown æ–‡æ¡£æ€»æ•°
      createToNowDay: 0, // åšå®¢åˆ›å»ºæ—¶é—´è·ä»Šå¤šå°‘å¤©
      lastActiveDate: "", // æœ€åæ´»åŠ¨æ—¶é—´
      totalWords: 0, // æœ¬ç«™æ€»å­—æ•°
      indexView: true, // å¼€å¯è®¿é—®é‡å’Œæ’åç»Ÿè®¡
    };
  },
  computed: {
    $lastUpdatePosts() {
      return lastUpdatePosts(this.$filterPosts);
    },
  },
  mounted() {
    // Young Kbt
    if (Object.keys(this.$themeConfig.blogInfo).length > 0) {
      const {
        blogCreate,
        mdFileCountType,
        totalWords,
        moutedEvent,
        eachFileWords,
        indexIteration,
        indexView,
      } = this.$themeConfig.blogInfo;
      this.createToNowDay = dayDiff(blogCreate);
      if (mdFileCountType != "archives") {
        this.mdFileCount = mdFileCountType.length;
      } else {
        this.mdFileCount = this.$filterPosts.length;
      }
      if (totalWords == "archives" && eachFileWords) {
        let archivesWords = 0;
        eachFileWords.forEach((itemFile) => {
          if (itemFile.wordsCount < 1000) {
            archivesWords += itemFile.wordsCount;
          } else {
            let wordsCount = itemFile.wordsCount.slice(
              0,
              itemFile.wordsCount.length - 1
            );
            archivesWords += wordsCount * 1000;
          }
        });
        this.totalWords = Math.round(archivesWords / 100) / 10 + "k";
      } else if (totalWords == "archives") {
        this.totalWords = 0;
        console.log(
          "å¦‚æœ totalWords = 'archives'ï¼Œå¿…é¡»ä¼ å…¥ eachFileWordsï¼Œæ˜¾ç„¶æ‚¨å¹¶æ²¡æœ‰ä¼ å…¥ï¼"
        );
      } else {
        this.totalWords = totalWords;
      }
      // æœ€åä¸€æ¬¡æ´»åŠ¨æ—¶é—´
      this.lastActiveDate = timeDiff(this.$lastUpdatePosts[0].lastUpdated);
      this.mountedWebInfo(moutedEvent);
      // è·å–è®¿é—®é‡å’Œæ’å
      this.indexView = indexView == undefined ? true : indexView;
      if (this.indexView) {
        this.getIndexViewCouter(indexIteration);
      }
    }
  },
  methods: {
    /**
     * æŒ‚è½½ç«™ç‚¹ä¿¡æ¯æ¨¡å—
     */
    mountedWebInfo(moutedEvent = ".tags-wrapper") {
      let interval = setInterval(() => {
        const tagsWrapper = document.querySelector(moutedEvent);
        const webInfo = document.querySelector(".web-info");
        if (tagsWrapper && webInfo) {
          if (!this.isSiblilngNode(tagsWrapper, webInfo)) {
            tagsWrapper.parentNode.insertBefore(
              webInfo,
              tagsWrapper.nextSibling
            );
            clearInterval(interval);
          }
        }
      }, 200);
    },
    /**
     * æŒ‚è½½åœ¨å…„å¼Ÿå…ƒç´ åé¢ï¼Œè¯´æ˜å½“å‰ç»„ä»¶æ˜¯ siblingNode å˜é‡
     */
    isSiblilngNode(element, siblingNode) {
      if (element.siblingNode == siblingNode) {
        return true;
      } else {
        return false;
      }
    },
    /**
     * é¦–é¡µçš„ç»Ÿè®¡é‡
     */
    getIndexViewCouter(iterationTime = 3000) {
      fetch();
      var i = 0;
      var defaultCouter = "9999";
      // å¦‚æœåªéœ€è¦ç¬¬ä¸€æ¬¡è·å–æ•°æ®ï¼ˆå¯èƒ½è·å–å¤±è´¥ï¼‰ï¼Œå¯æ³¨é‡Šæ‰ setTimeout å†…å®¹ï¼Œæ­¤å†…å®¹æ˜¯ç¬¬ä¸€æ¬¡è·å–å¤±è´¥åï¼Œé‡æ–°è·å–è®¿é—®é‡
      // å¯èƒ½ä¼šå¯¼è‡´è®¿é—®é‡å†æ¬¡ + 1 åŸå› ï¼šå–å†³äº setTimeout çš„æ—¶é—´ï¼ˆéœ€æ±‚è°ƒèŠ‚ï¼‰ï¼ŒsetTimeout å¤ªå¿«å¯¼è‡´ç¬¬ä¸€ä¸ªè·å–çš„æ•°æ®æ²¡è¿”å›ï¼Œå°±ç¬¬äºŒæ¬¡è·å–ï¼Œå¯¼è‡´ç»“æœè¿”å› + 2 çš„æ•°æ®
      setTimeout(() => {
        let indexUv = document.querySelector(".web-site-pv");
        let indexPv = document.querySelector(".web-site-uv");
        if (
          indexPv &&
          indexUv &&
          indexPv.innerText == "" &&
          indexUv.innerText == ""
        ) {
          let interval = setInterval(() => {
            // å†æ¬¡åˆ¤æ–­åŸå› ï¼šé˜²æ­¢è¿›å…¥ setInterval çš„ç¬é—´ï¼Œè®¿é—®é‡è·å–æˆåŠŸ
            if (
              indexPv &&
              indexUv &&
              indexPv.innerText == "" &&
              indexUv.innerText == ""
            ) {
              i += iterationTime;
              if (i > iterationTime * 5) {
                indexPv.innerText = defaultCouter;
                indexUv.innerText = defaultCouter;
                clearInterval(interval); // 5 æ¬¡åæ— æ³•è·å–ï¼Œåˆ™å–æ¶ˆè·å–
              }
              if (indexPv.innerText == "" && indexUv.innerText == "") {
                // æ‰‹åŠ¨è·å–è®¿é—®é‡
                fetch();
              } else {
                clearInterval(interval);
              }
            } else {
              clearInterval(interval);
            }
          }, iterationTime);
          // ç»‘å®š beforeDestroy ç”Ÿå‘½é’©å­ï¼Œæ¸…é™¤å®šæ—¶å™¨
          this.$once("hook:beforeDestroy", () => {
            clearInterval(interval);
            interval = null;
          });
        }
      }, iterationTime);
    },
   
  },
};
</script>

<style scoped>
.web-info {
  font-size: 0.875rem;
  padding: 0.95rem;
}
.webinfo-title {
  text-align: center;
  color: #888;
  font-weight: bold;
  padding: 0 0 10px 0;
}
.webinfo-item {
  padding: 8px 0 0;
  margin: 0;
}
.webinfo-item-title {
  display: inline-block;
}
.webinfo-content {
  display: inline-block;
  float: right;
}
@keyframes turn {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.loading {
  display: inline-block;
  animation: turn 1s linear infinite;
  -webkit-animation: turn 1s linear infinite;
}
</style>
```

ç»§ç»­åœ¨ vdoing/components ç›®å½•ä¸‹åˆ›å»º `PageInfo.vue` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```vue
<template>
  <div class="page-view">
    <!-- æ–‡ç« å­—æ•° -->
    <div title="æ–‡ç« å­—æ•°" class="book-words iconfont icon-book">
      <a href="javascript:;" style="margin-left: 3px; color: #888">{{
        wordsCount
      }}</a>
    </div>

    <!-- é¢„é˜…è¯»æ—¶é•¿ -->
    <div
      v-if="readingTime"
      title="é¢„é˜…è¯»æ—¶é•¿"
      class="reading-time iconfont icon-shijian"
    >
      <a href="javascript:;" style="margin-left: 3px; color: #888">{{
        readingTime
      }}</a>
    </div>
    <!-- æµè§ˆé‡ -->
    <div v-if="pageView" title="æµè§ˆé‡" class="page-view iconfont icon-view">
      <a
        style="color: #888; margin-left: 3px"
        href="javascript:;"
        id="busuanzi_value_page_pv"
        class="view-data"
        ><i title="æ­£åœ¨è·å–..." class="loading iconfont icon-loading"></i
      ></a>
    </div>
  </div>
</template>

<script>
import { fetch } from "../util/webSiteInfo";
export default {
  data() {
    return {
      // Young Kbt
      wordsCount: 0,
      readingTime: 0,
      pageView: true,
      pageIteration: 3000,
    };
  },
  mounted() {
    this.initPageInfo();
  },
  watch: {
    $route(to, from) {
      if (
        to.path !== "/" &&
        to.path != from.path &&
        this.$themeConfig.blogInfo
      ) {
        this.initPageInfo();
      }
    },
  },
  methods: {
    /**
     * åˆå§‹åŒ–é¡µé¢ä¿¡æ¯
     */
    initPageInfo() {
      this.$filterPosts.forEach((itemPage) => {
        if (itemPage.path == this.$route.path) {
          const { eachFileWords, pageView, pageIteration, readingTime } =
            this.$themeConfig.blogInfo;
          this.pageIteration = pageIteration;
          if (eachFileWords) {
            eachFileWords.forEach((itemFile) => {
              if (itemFile.permalink == itemPage.frontmatter.permalink) {
                this.wordsCount = itemFile.wordsCount;
                if (readingTime || readingTime == undefined) {
                  this.readingTime = itemFile.readingTime;
                } else {
                  this.readingTime = false;
                }
              }
            });
          }
          this.pageView = pageView == undefined ? true : pageView;
          if (this.pageView) {
            this.getPageViewCouter(this.pageIteration);
          }
          return;
        }
      });
    },
    /**
     * æ–‡ç« é¡µçš„è®¿é—®é‡
     */
    getPageViewCouter(iterationTime = 3000) {
      fetch();
      let i = 0;
      var defaultCouter = "9999";
      // å¦‚æœåªéœ€è¦ç¬¬ä¸€æ¬¡è·å–æ•°æ®ï¼ˆå¯èƒ½è·å–å¤±è´¥ï¼‰ï¼Œå¯æ³¨é‡Šæ‰ setTimeout å†…å®¹ï¼Œæ­¤å†…å®¹æ˜¯ç¬¬ä¸€æ¬¡è·å–å¤±è´¥åï¼Œé‡æ–°è·å–è®¿é—®é‡
      // å¯èƒ½ä¼šå¯¼è‡´è®¿é—®é‡å†æ¬¡ + 1 åŸå› ï¼šå–å†³äº setTimeout çš„æ—¶é—´ï¼ˆéœ€æ±‚è°ƒèŠ‚ï¼‰ï¼ŒsetTimeout å¤ªå¿«å¯¼è‡´ç¬¬ä¸€ä¸ªè·å–çš„æ•°æ®æ²¡è¿”å›ï¼Œå°±ç¬¬äºŒæ¬¡è·å–ï¼Œå¯¼è‡´ç»“æœè¿”å› + 2 çš„æ•°æ®
      setTimeout(() => {
        let pageView = document.querySelector(".view-data");
        if (pageView && pageView.innerText == "") {
          let interval = setInterval(() => {
            // å†æ¬¡åˆ¤æ–­åŸå› ï¼šé˜²æ­¢è¿›å…¥ setInterval çš„ç¬é—´ï¼Œè®¿é—®é‡è·å–æˆåŠŸ
            if (pageView && pageView.innerText == "") {
              i += iterationTime;
              if (i > iterationTime * 5) {
                pageView.innerText = defaultCouter;
                clearInterval(interval); // 5 æ¬¡åæ— æ³•è·å–ï¼Œåˆ™å–æ¶ˆè·å–
              }
              if (pageView.innerText == "") {
                // æ‰‹åŠ¨è·å–è®¿é—®é‡
                fetch();
              } else {
                clearInterval(interval);
              }
            } else {
              clearInterval(interval);
            }
          }, iterationTime);
          // ç»‘å®š beforeDestroy ç”Ÿå‘½é’©å­ï¼Œæ¸…é™¤å®šæ—¶å™¨
          this.$once("hook:beforeDestroy", () => {
            clearInterval(interval);
            interval = null;
          });
        }
      }, iterationTime);
    },
  },
};
</script>

<style scoped>
.page-view > div {
  float: left;
  margin-left: 20px;
  font-size: 0.8rem;
}

@keyframes turn {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

.loading {
  display: inline-block;
  animation: turn 1s linear infinite;
  -webkit-animation: turn 1s linear infinite;
}
</style>
```

### Vueç»„ä»¶å¼•ç”¨

å†™å¥½ä¸¤ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨å®ƒä»¬ã€‚

> å¼•å…¥ `WebInfo.vue` ç»„ä»¶

æ‰“å¼€ vdoing/components/`Home.vue` æ–‡ä»¶ã€‚

å¤§æ¦‚åœ¨ 174 è¡Œå¤„å¼•å…¥ `WebInfo.vue` ç»„ä»¶ï¼š

```js
import WebInfo from './WebInfo.vue';
```

å¤§æ¦‚åœ¨ 242 è¡Œå¤„æ‰¾åˆ° `components` æ³¨å†Œè¯¥ç»„ä»¶ï¼š

```js
components: { ......, WebInfo },
```

å¤§æ¦‚åœ¨ 153 è¡Œå¤„ï¼ˆdiv çš„ class ä¸º `custom-html-box` çš„ä¸Šæ–¹ï¼‰ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```js
<webInfo />
```

ä¸‰ä¸ªæ•ˆæœå›¾ï¼š

![image-20220110215442265](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220110215443.png)

![image-20220110215509546](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220110215510.png)

![image-20220110215531954](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220110215533.png)

> å¼•å…¥ `PageInfo.vue` ç»„ä»¶

æ‰“å¼€ vdoing/components/`ArticleInfo.vue` æ–‡ä»¶ã€‚

å¤§æ¦‚åœ¨ 67 è¡Œå¤„å¼•å…¥ `PagesView.vue` ç»„ä»¶ï¼š

```js
import PageInfo from './PageInfo.vue';
```

å¤§æ¦‚åœ¨ 69 è¡Œå¤„æ·»åŠ  `components` æ³¨å†Œè¯¥ç»„ä»¶ï¼ˆ`data()` ä¸Šæ–¹ï¼‰ï¼š

```js
components: { PageInfo },
```

å¤§æ¦‚åœ¨ 61 è¡Œå¤„ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```js
<PageInfo style="margin-left: 0" />
```

æ•ˆæœå›¾ï¼š

![image-20220110220005822](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220110220006.png)

### æ ¸å¿ƒé…ç½®æ–‡ä»¶

åœ¨ docs/.vuepress ç›®å½•ä¸‹åˆ›å»º webSiteInfo æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹é‡Œåˆ›å»º `readFile.js` æ–‡ä»¶ã€‚

æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

:::: tabs :options="{ useUrlFragment: false }"
::: tab JS

```js
const fs = require('fs'); // æ–‡ä»¶æ¨¡å—
const path = require('path'); // è·¯å¾„æ¨¡å—
const matter = require('gray-matter'); // FrontMatterè§£æå™¨ https://github.com/jonschlinkert/gray-matter
const chalk = require('chalk') // å‘½ä»¤è¡Œæ‰“å°ç¾åŒ–
const log = console.log
const docsRoot = path.join(__dirname, '..', '..', '..', 'docs'); // docsæ–‡ä»¶è·¯å¾„

/**
 * è·å–æœ¬ç«™çš„æ–‡ç« æ•°æ®
 * è·å–æ‰€æœ‰çš„ md æ–‡æ¡£ï¼Œå¯ä»¥æ’é™¤æŒ‡å®šç›®å½•ä¸‹çš„æ–‡æ¡£
 */
function readFileList(excludeFiles = [''], dir = docsRoot, filesList = []) {
  const files = fs.readdirSync(dir);
  files.forEach((item, index) => {
    let filePath = path.join(dir, item);
    const stat = fs.statSync(filePath);
    if (!(excludeFiles instanceof Array)) {
      log(chalk.yellow(`error: ä¼ å…¥çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚`))
    }
    excludeFiles.forEach((excludeFile) => {
      if (stat.isDirectory() && item !== '.vuepress' && item !== '@pages' && item !== excludeFile) {
        readFileList(excludeFiles, path.join(dir, item), filesList);  //é€’å½’è¯»å–æ–‡ä»¶
      } else {
        if (path.basename(dir) !== 'docs') { // è¿‡æ»¤ docsç›®å½•çº§ä¸‹çš„æ–‡ä»¶

          const fileNameArr = path.basename(filePath).split('.')
          let name = null, type = null;
          if (fileNameArr.length === 2) { // æ²¡æœ‰åºå·çš„æ–‡ä»¶
            name = fileNameArr[0]
            type = fileNameArr[1]
          } else if (fileNameArr.length === 3) { // æœ‰åºå·çš„æ–‡ä»¶
            name = fileNameArr[1]
            type = fileNameArr[2]
          } else { // è¶…è¿‡ä¸¤ä¸ªâ€˜.â€™çš„
            log(chalk.yellow(`warning: è¯¥æ–‡ä»¶ "${filePath}" æ²¡æœ‰æŒ‰ç…§çº¦å®šå‘½åï¼Œå°†å¿½ç•¥ç”Ÿæˆç›¸åº”æ•°æ®ã€‚`))
            return
          }
          if (type === 'md') { // è¿‡æ»¤é md æ–‡ä»¶
            filesList.push({
              name,
              filePath
            });
          }
        }
      }
    });
  });
  return filesList;
}
/**
 * è·å–æœ¬ç«™çš„æ–‡ç« æ€»å­—æ•°
 * å¯ä»¥æ’é™¤æŸä¸ªç›®å½•ä¸‹çš„ md æ–‡æ¡£å­—æ•°
 */
function readTotalFileWords(excludeFiles = ['']) {
  const filesList = readFileList(excludeFiles);
  var wordCount = 0;
  filesList.forEach((item) => {
    const content = getContent(item.filePath);
    var len = counter(content);
    wordCount += len[0] + len[1];
  });
  if (wordCount < 1000) {
    return wordCount;
  }
  return Math.round(wordCount / 100) / 10 + 'k';
}
/**
 * è·å–æ¯ä¸€ä¸ªæ–‡ç« çš„å­—æ•°
 * å¯ä»¥æ’é™¤æŸä¸ªç›®å½•ä¸‹çš„ md æ–‡æ¡£å­—æ•°
 */
function readEachFileWords(excludeFiles = [''], cn, en) {
  const filesListWords = [];
  const filesList = readFileList(excludeFiles);
  filesList.forEach((item) => {
    const content = getContent(item.filePath);
    var len = counter(content);
    // è®¡ç®—é¢„è®¡çš„é˜…è¯»æ—¶é—´
    var readingTime = readTime(len, cn, en);
    var wordsCount = 0;
    wordsCount = len[0] + len[1];
    if (wordsCount >= 1000) {
      wordsCount = Math.round(wordsCount / 100) / 10 + 'k';
    }
    // fileMatterObj => {content:'å‰”é™¤frontmatteråçš„æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²', data:{<frontmatterå¯¹è±¡>}, ...}
    const fileMatterObj = matter(content, {});
    const matterData = fileMatterObj.data;
    filesListWords.push({ ...item, wordsCount, readingTime, ...matterData });
  });
  return filesListWords;
}

/**
 * è®¡ç®—é¢„è®¡çš„é˜…è¯»æ—¶é—´
 */
function readTime(len, cn = 300, en = 160) {
  var readingTime = len[0] / cn + len[1] / en;
  if (readingTime > 60 && readingTime < 60 * 24) {   // å¤§äºä¸€ä¸ªå°æ—¶ï¼Œå°äºä¸€å¤©
    let hour = parseInt(readingTime / 60);
    let minute = parseInt((readingTime - hour * 60));
    if (minute === 0) {
      return hour + 'h';
    }
    return hour + 'h' + minute + 'm';
  } else if (readingTime > 60 * 24) {      // å¤§äºä¸€å¤©
    let day = parseInt(readingTime / (60 * 24));
    let hour = parseInt((readingTime - day * 24 * 60) / 60);
    if (hour === 0) {
      return day + 'd';
    }
    return day + 'd' + hour + 'h';
  }
  return readingTime < 1 ? '1' : parseInt((readingTime * 10)) / 10 + 'm';   // å–ä¸€ä½å°æ•°
}

/**
 * è¯»å–æ–‡ä»¶å†…å®¹
 */
function getContent(filePath) {
  return fs.readFileSync(filePath, 'utf8');
}
/**
 * è·å–æ–‡ä»¶å†…å®¹çš„å­—æ•°
 * cnï¼šä¸­æ–‡
 * enï¼šä¸€æ•´å¥è‹±æ–‡ï¼ˆæ²¡æœ‰ç©ºæ ¼éš”å¼€çš„è‹±æ–‡ä¸º 1 ä¸ªï¼‰
 */
function counter(content) {
  const cn = (content.match(/[\u4E00-\u9FA5]/g) || []).length;
  const en = (content.replace(/[\u4E00-\u9FA5]/g, '').match(/[a-zA-Z0-9_\u0392-\u03c9\u0400-\u04FF]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|[\u00E4\u00C4\u00E5\u00C5\u00F6\u00D6]+|\w+/g) || []).length;
  return [cn, en];
}

module.exports = {
  readFileList,
  readTotalFileWords,
  readEachFileWords,
}
```

:::
::: tab TS

```tsx
import fs from 'fs'; // æ–‡ä»¶æ¨¡å—
import path from 'path'; // è·¯å¾„æ¨¡å—
import matter from 'gray-matter'; // FrontMatterè§£æå™¨ https://github.com/jonschlinkert/gray-matter
import chalk from 'chalk' // å‘½ä»¤è¡Œæ‰“å°ç¾åŒ–
const log = console.log
const docsRoot = path.join(__dirname, '..', '..', '..', 'docs'); // docsæ–‡ä»¶è·¯å¾„

/**
 * è·å–æœ¬ç«™çš„æ–‡ç« æ•°æ®
 * è·å–æ‰€æœ‰çš„ md æ–‡æ¡£ï¼Œå¯ä»¥æ’é™¤æŒ‡å®šç›®å½•ä¸‹çš„æ–‡æ¡£
 */
function readFileList(excludeFiles: Array<string> = [''], dir: string = docsRoot, filesList: Array<Object> = []) {
  const files = fs.readdirSync(dir);
  files.forEach((item, index) => {
    let filePath = path.join(dir, item);
    const stat = fs.statSync(filePath);
    if (!(excludeFiles instanceof Array)) {
      log(chalk.yellow(`error: ä¼ å…¥çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚`))
    }
    excludeFiles.forEach((excludeFile) => {
      if (stat.isDirectory() && item !== '.vuepress' && item !== '@pages' && item !== excludeFile) {
        readFileList(excludeFiles, path.join(dir, item), filesList);  //é€’å½’è¯»å–æ–‡ä»¶
      } else {
        if (path.basename(dir) !== 'docs') { // è¿‡æ»¤ docsç›®å½•çº§ä¸‹çš„æ–‡ä»¶

          const fileNameArr = path.basename(filePath).split('.')
          let name = null, type = null;
          if (fileNameArr.length === 2) { // æ²¡æœ‰åºå·çš„æ–‡ä»¶
            name = fileNameArr[0]
            type = fileNameArr[1]
          } else if (fileNameArr.length === 3) { // æœ‰åºå·çš„æ–‡ä»¶
            name = fileNameArr[1]
            type = fileNameArr[2]
          } else { // è¶…è¿‡ä¸¤ä¸ªâ€˜.â€™çš„
            log(chalk.yellow(`warning: è¯¥æ–‡ä»¶ "${filePath}" æ²¡æœ‰æŒ‰ç…§çº¦å®šå‘½åï¼Œå°†å¿½ç•¥ç”Ÿæˆç›¸åº”æ•°æ®ã€‚`))
            return
          }
          if (type === 'md') { // è¿‡æ»¤é md æ–‡ä»¶
            filesList.push({
              name,
              filePath
            });
          }
        }
      }
    });
  });
  return filesList;
}
/**
 * è·å–æœ¬ç«™çš„æ–‡ç« æ€»å­—æ•°
 * å¯ä»¥æ’é™¤æŸä¸ªç›®å½•ä¸‹çš„ md æ–‡æ¡£å­—æ•°
 */
function readTotalFileWords(excludeFiles = ['']) {
  const filesList = readFileList(excludeFiles);
  let wordCount = 0;
  filesList.forEach((item: any) => {
    const content = getContent(item.filePath);
    let len = counter(content);
    wordCount += len[0] + len[1];
  });
  if (wordCount < 1000) {
    return wordCount;
  }
  return Math.round(wordCount / 100) / 10 + 'k';
}
/**
 * è·å–æ¯ä¸€ä¸ªæ–‡ç« çš„å­—æ•°
 * å¯ä»¥æ’é™¤æŸä¸ªç›®å½•ä¸‹çš„ md æ–‡æ¡£å­—æ•°
 */
function readEachFileWords(excludeFiles: Array<string> = [''], cn: number, en: number) {
  const filesListWords = [];
  const filesList = readFileList(excludeFiles);
  filesList.forEach((item: any) => {
    const content = getContent(item.filePath);
    let len = counter(content);
    // è®¡ç®—é¢„è®¡çš„é˜…è¯»æ—¶é—´
    let readingTime = readTime(len, cn, en);
    let wordsCount: any = 0;
    wordsCount = len[0] + len[1];
    if (wordsCount >= 1000) {
      wordsCount = Math.round(wordsCount / 100) / 10 + 'k';
    }
    // fileMatterObj => {content:'å‰”é™¤frontmatteråçš„æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²', data:{<frontmatterå¯¹è±¡>}, ...}
    const fileMatterObj = matter(content, {});
    const matterData = fileMatterObj.data;
    filesListWords.push({ ...item, wordsCount, readingTime, ...matterData });
  });
  return filesListWords;
}

/**
 * è®¡ç®—é¢„è®¡çš„é˜…è¯»æ—¶é—´
 */
function readTime(len: Array<number>, cn: number = 300, en: number = 160) {
  let readingTime = len[0] / cn + len[1] / en;
  if (readingTime > 60 && readingTime < 60 * 24) {   // å¤§äºä¸€ä¸ªå°æ—¶ï¼Œå°äºä¸€å¤©
    let hour = Math.trunc(readingTime / 60);
    let minute = Math.trunc(readingTime - hour * 60);
    if (minute === 0) {
      return hour + 'h';
    }
    return hour + 'h' + minute + 'm';
  } else if (readingTime > 60 * 24) {      // å¤§äºä¸€å¤©
    let day = Math.trunc(readingTime / (60 * 24));
    let hour = Math.trunc((readingTime - day * 24 * 60) / 60);
    if (hour === 0) {
      return day + 'd';
    }
    return day + 'd' + hour + 'h';
  }
  return readingTime < 1 ? '1' : Math.trunc(readingTime * 10) / 10 + 'm';   // å–ä¸€ä½å°æ•°
}

/**
 * è¯»å–æ–‡ä»¶å†…å®¹
 */
function getContent(filePath: string) {
  return fs.readFileSync(filePath, 'utf8');
}
/**
 * è·å–æ–‡ä»¶å†…å®¹çš„å­—æ•°
 * cnï¼šä¸­æ–‡
 * enï¼šä¸€æ•´å¥è‹±æ–‡ï¼ˆæ²¡æœ‰ç©ºæ ¼éš”å¼€çš„è‹±æ–‡ä¸º 1 ä¸ªï¼‰
 */
function counter(content: string) {
  const cn = (content.match(/[\u4E00-\u9FA5]/g) || []).length;
  const en = (content.replace(/[\u4E00-\u9FA5]/g, '').match(/[a-zA-Z0-9_\u0392-\u03c9\u0400-\u04FF]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|[\u00E4\u00C4\u00E5\u00C5\u00F6\u00D6]+|\w+/g) || []).length;
  return [cn, en];
}

export {
  readFileList,
  readTotalFileWords,
  readEachFileWords,
}
```

:::
::::

### é…ç½®ç«™ç‚¹ä¿¡æ¯

æœ€åä¸€æ­¥ï¼Œåœ¨ docs/.vuepress/config.jsï¼ˆæ–°ç‰ˆä¸º config.tsï¼‰æ–‡ä»¶ï¼Œå¼•å…¥å†™å¥½çš„ `readFile.js` æ–‡ä»¶ï¼ˆè·¯å¾„è¦å‡†ç¡®ï¼Œè¿™é‡Œä»…ä»…æ˜¯æ¨¡æ¿ï¼‰

:::: tabs :options="{ useUrlFragment: false }"

::: tab JS

```js
const { readFileList, readTotalFileWords, readEachFileWords } = require('./webSiteInfo/readFile');
```

:::

::: tab TS

```tsx
import { readFileList, readTotalFileWords, readEachFileWords } from './webSiteInfo/readFile';
```

:::

::::

å¦‚å›¾ï¼ˆæ¼”ç¤º JS ä»£ç å—ï¼‰ï¼š

![image-20220103124132339](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220103124134.png)

åœ¨ themeConfig ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```js
// ç«™ç‚¹é…ç½®ï¼ˆé¦–é¡µ & æ–‡ç« é¡µï¼‰
blogInfo: {
  blogCreate: '2021-10-19', // åšå®¢åˆ›å»ºæ—¶é—´
  indexView: true,  // å¼€å¯é¦–é¡µçš„è®¿é—®é‡å’Œæ’åç»Ÿè®¡ï¼Œé»˜è®¤ trueï¼ˆå¼€å¯ï¼‰
  pageView: true,  // å¼€å¯æ–‡ç« é¡µçš„æµè§ˆé‡ç»Ÿè®¡ï¼Œé»˜è®¤ trueï¼ˆå¼€å¯ï¼‰
  readingTime: true,  // å¼€å¯æ–‡ç« é¡µçš„é¢„è®¡é˜…è¯»æ—¶é—´ï¼Œæ¡ä»¶ï¼šå¼€å¯ eachFileWordsï¼Œé»˜è®¤ trueï¼ˆå¼€å¯ï¼‰ã€‚å¯åœ¨ eachFileWords çš„ readEachFileWords çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°è‡ªå®šä¹‰ï¼Œé»˜è®¤ 1 åˆ†é’Ÿ 300 ä¸­æ–‡ã€160 è‹±æ–‡
  eachFileWords: readEachFileWords([''], 300, 160),  // å¼€å¯æ¯ä¸ªæ–‡ç« é¡µçš„å­—æ•°ã€‚readEachFileWords(['xx']) å…³é—­ xx ç›®å½•ï¼ˆå¯å¤šä¸ªï¼Œå¯ä¸ä¼ å‚æ•°ï¼‰ä¸‹çš„æ–‡ç« é¡µå­—æ•°å’Œé˜…è¯»æ—¶é•¿ï¼Œåé¢ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ 1 åˆ†é’Ÿé‡Œèƒ½é˜…è¯»çš„ä¸­æ–‡å­—æ•°å’Œè‹±æ–‡å­—æ•°ã€‚æ— é»˜è®¤å€¼ã€‚readEachFileWords() æ–¹æ³•é»˜è®¤æ’é™¤äº† article ä¸º false çš„æ–‡ç« 
  mdFileCountType: 'archives',  // å¼€å¯æ–‡æ¡£æ•°ã€‚1. archives è·å–å½’æ¡£çš„æ–‡æ¡£æ•°ï¼ˆé»˜è®¤ï¼‰ã€‚2. æ•°ç»„ readFileList(['xx']) æ’é™¤ xx ç›®å½•ï¼ˆå¯å¤šä¸ªï¼Œå¯ä¸ä¼ å‚æ•°ï¼‰ï¼Œè·å–å…¶ä»–ç›®å½•çš„æ–‡æ¡£æ•°ã€‚æç¤ºï¼šreadFileList() è·å– docs ä¸‹æ‰€æœ‰çš„ md æ–‡æ¡£ï¼ˆé™¤äº† `.vuepress` å’Œ `@pages` ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼‰
  totalWords: 'archives',  // å¼€å¯æœ¬ç«™æ–‡æ¡£æ€»å­—æ•°ã€‚1. archives è·å–å½’æ¡£çš„æ–‡æ¡£æ•°ï¼ˆä½¿ç”¨ archives æ¡ä»¶ï¼šä¼ å…¥ eachFileWordsï¼Œå¦åˆ™æŠ¥é”™ï¼‰ã€‚2. readTotalFileWords(['xx']) æ’é™¤ xx ç›®å½•ï¼ˆå¯å¤šä¸ªï¼Œå¯ä¸ä¼ å‚æ•°ï¼‰ï¼Œè·å–å…¶ä»–ç›®å½•çš„æ–‡ç« å­—æ•°ã€‚æ— é»˜è®¤å€¼
  moutedEvent: '.tags-wrapper',   // é¦–é¡µçš„ç«™ç‚¹æ¨¡å—æŒ‚è½½åœ¨æŸä¸ªå…ƒç´ åé¢ï¼ˆæ”¯æŒå¤šç§é€‰æ‹©å™¨ï¼‰ï¼ŒæŒ‡çš„æ˜¯æŒ‚è½½åœ¨å“ªä¸ªå…„å¼Ÿå…ƒç´ çš„åé¢ï¼Œé»˜è®¤æ˜¯çƒ­é—¨æ ‡ç­¾ '.tags-wrapper' ä¸‹é¢ï¼Œæç¤ºï¼š'.categories-wrapper' ä¼šæŒ‚è½½åœ¨æ–‡ç« åˆ†ç±»ä¸‹é¢ã€‚'.blogger-wrapper' ä¼šæŒ‚è½½åœ¨åšå®¢å¤´åƒæ¨¡å—ä¸‹é¢
  // ä¸‹é¢ä¸¤ä¸ªé€‰é¡¹ï¼šç¬¬ä¸€æ¬¡è·å–è®¿é—®é‡å¤±è´¥åçš„è¿­ä»£æ—¶é—´
  indexIteration: 2500,   // å¦‚æœé¦–é¡µè·å–è®¿é—®é‡å¤±è´¥ï¼Œåˆ™æ¯éš”å¤šå°‘æ—¶é—´åè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œç›´åˆ°è·å–æˆåŠŸæˆ–è·å– 10 æ¬¡åã€‚é»˜è®¤ 3 ç§’ã€‚æ³¨æ„ï¼šè®¾ç½®æ—¶é—´å¤ªä½ï¼Œå¯èƒ½å¯¼è‡´è®¿é—®é‡ + 2ã€+ 3 ......
  pageIteration: 2500,    // å¦‚æœæ–‡ç« é¡µè·å–è®¿é—®é‡å¤±è´¥ï¼Œåˆ™æ¯éš”å¤šå°‘æ—¶é—´åè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œç›´åˆ°è·å–æˆåŠŸæˆ–è·å– 10 æ¬¡åã€‚é»˜è®¤ 3 ç§’ã€‚æ³¨æ„ï¼šè®¾ç½®æ—¶é—´å¤ªä½ï¼Œå¯èƒ½å¯¼è‡´è®¿é—®é‡ + 2ã€+ 3 ......
  // è¯´æ˜ï¼šæˆåŠŸè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œè®¿é—®é‡ + 1ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡è·å–å¤±è´¥åï¼Œè®¾ç½®çš„æ¯ä¸ªéš”æ®µé‡æ–°è·å–æ—¶é—´ï¼Œå°†ä¼šå½±å“è®¿é—®é‡çš„æ¬¡æ•°ã€‚å¦‚ 100 å¯èƒ½æ¯æ¬¡è·å–è®¿é—®é‡ + 3
},
```

å¦‚å›¾ï¼ˆå›¾ç‰‡å†…å®¹ä¸ä¸€å®šæ˜¯æœ€æ–°ï¼‰ï¼š

![image-20220104192821504](https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20220104192822.png)

å±æ€§é…ç½®çš„å…·ä½“ä»‹ç»è¯·çœ‹ [å±æ€§é…ç½®](#å±æ€§é…ç½®)ã€‚

## å±æ€§é…ç½®

**blogCreate**

- ç±»å‹ï¼š`string`
- é»˜è®¤å€¼ï¼šå½“å‰æ—¶é—´ï¼ˆ`new Date()`ï¼‰
- æ ¼å¼ï¼šyyyy-mm-dd

åšå®¢åˆ›å»ºæ—¶é—´ã€‚å¦‚æœä¸æ·»åŠ æ—¶é—´ï¼Œé¡µé¢ä¸Šæ˜¾ç¤º 0 å¤©ã€‚

**mdFileCountType**

- ç±»å‹ï¼š`string` | `readFileList()`
- å‚æ•°ï¼šæ•°ç»„
- é»˜è®¤å€¼ï¼šarchives

æ–‡ç« æ•°ç›®ã€‚å¦‚æœä¸æ·»åŠ å†…å®¹ï¼Œé¡µé¢ä¸Šæ˜¾ç¤ºå½’æ¡£çš„æ–‡ç« æ•°ç›®ã€‚

`readFileList` æ˜¯ä¸€ä¸ª js æ–‡ä»¶ï¼Œéœ€è¦å¼•å…¥ï¼Œå‚æ•°æ˜¯ <mark>ç›®å½•çš„å…¨å</mark>ï¼Œæœ€ç»ˆæ•ˆæœä¼š <mark>æ’é™¤è¯¥ç›®å½•é‡Œçš„æ–‡ç« æ•°</mark>ï¼Œå¯å¤šé€‰ï¼Œé€—å·éš”å¼€ã€‚ä¹Ÿå¯ä¸ä¼ å‚æ•°ã€‚

æ¸©é¦¨æç¤ºï¼š`readFileList()` ä¸ä¼ å‚æ•°ä¼šè·å– docs ä¸‹æ‰€æœ‰çš„ md æ–‡æ¡£ï¼ˆé™¤äº† `.vuepress` å’Œ `@pages` ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼‰ã€‚

**totalWords**

- ç±»å‹ï¼š`string` | `readFileWords()`
- å‚æ•°ï¼šæ•°ç»„
- é»˜è®¤å€¼ï¼šnull

æœ¬ç«™æ–‡æ¡£æ€»å­—æ•°ã€‚å¦‚æœä¸æ·»åŠ å†…å®¹ï¼Œé¡µé¢ä¸Šæ˜¾ç¤º 0 å­—ã€‚

`string` ä»…æ”¯æŒ archivesï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥ç±»å‹æœ‰æ¡ä»¶ï¼šå¿…é¡»ä½¿ç”¨ eachFileWordsï¼Œå¦åˆ™æŠ¥é”™ã€‚

`readFileWords` æ˜¯ä¸€ä¸ª js æ–‡ä»¶ï¼Œéœ€è¦å¼•å…¥ï¼Œå‚æ•°æ˜¯ç›®å½•çš„å…¨åï¼Œæœ€ç»ˆæ•ˆæœä¼š <mark>æ’é™¤è¯¥ç›®å½•é‡Œçš„æ–‡ç« å­—æ•°</mark>ï¼Œå¯å¤šé€‰ï¼Œé€—å·éš”å¼€ã€‚ä¹Ÿå¯ä¸ä¼ å‚æ•°ã€‚

**moutedEvent**

- ç±»å‹ï¼š`string`
- é»˜è®¤å€¼ï¼š.tags-wrapper

é€‰æ‹©æŒ‚è½½çš„å…ƒç´ å±æ€§ï¼Œæ”¯æŒå¤šç§é€‰æ‹©å™¨ï¼ˆidã€class ......ï¼‰ï¼Œè¯¥æ¨¡å—ä¼šæŒ‚è½½åˆ°è¯¥å…ƒç´ åé¢ï¼Œå½¢æˆå…„å¼Ÿå…ƒç´ ã€‚ï¼ˆä»…æ”¯æŒé¦–é¡µçš„å…ƒç´ ï¼‰ã€‚

æ¸©é¦¨æç¤ºï¼š`.categories-wrapper` ä¼šæŒ‚è½½åœ¨æ–‡ç« åˆ†ç±»ä¸‹é¢ï¼›`.blogger-wrapper` ä¼šæŒ‚è½½åœ¨å¤´åƒæ¨¡å—ä¸‹é¢ï¼›`.icons` ä¼šæŒ‚è½½åœ¨å¤´åƒä¸‹æ–¹ã€å›¾æ ‡ä¸Šæ–¹ã€‚

é»˜è®¤æ˜¯çƒ­é—¨æ ‡ç­¾ `.tags-wrapper` ä¸‹é¢ã€‚

**indexView**

- ç±»å‹ï¼š`boolean`
- é»˜è®¤å€¼ï¼štrue

å¼€å¯é¦–é¡µçš„è®¿é—®é‡å’Œæ’åç»Ÿè®¡ï¼Œé»˜è®¤ true(å¼€å¯)ã€‚

**pageView**

- ç±»å‹ `boolean`
- é»˜è®¤å€¼ï¼štrue

å¼€å¯æ–‡ç« é¡µçš„æµè§ˆé‡ç»Ÿè®¡ï¼Œé»˜è®¤ trueï¼ˆå¼€å¯ï¼‰ã€‚

**eachFileWords**

- ç±»å‹ï¼š`readEachFileWords()`
- å‚æ•°ï¼šæ•°ç»„
- é»˜è®¤å€¼ï¼šnull

å¼€å¯æ¯ä¸ªæ–‡ç« é¡µçš„å­—æ•°ã€‚å¦‚æœä¸æ·»åŠ å†…å®¹ï¼Œåˆ™ä¸å¼€å¯ã€‚

`readEachFileWords(['xx'])` å…³é—­ xx ç›®å½•ï¼ˆå¯å¤šä¸ªï¼Œå¯ä¸ä¼ å‚æ•°ï¼‰ä¸‹çš„æ–‡ç« é¡µå­—æ•°å’Œé˜…è¯»æ—¶é•¿ã€‚

`readEachFileWords()` ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„ï¼Œåé¢ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ 1 åˆ†é’Ÿé‡Œèƒ½é˜…è¯»çš„ä¸­æ–‡å­—æ•°å’Œè‹±æ–‡å­—æ•°ï¼Œé…åˆ **readingTime** ä½¿ç”¨ã€‚

`readEachFileWords()` æ–¹æ³•é»˜è®¤æ’é™¤äº† article ä¸º false çš„æ–‡ç« ã€‚

**readingTime**

- ç±»å‹ï¼š`boolean`
- é»˜è®¤å€¼ï¼štrue

- æ¡ä»¶ï¼šä½¿ç”¨ `eachFileWords`

å¼€å¯æ–‡ç« é¡µçš„é¢„è®¡é˜…è¯»æ—¶é—´ã€‚é»˜è®¤é˜…è¯»ä¸­æ–‡ 1 åˆ†é’Ÿ 300 ä¸ªå­—ï¼Œè‹±æ–‡ 1 åˆ†é’Ÿ 160 ä¸ªå­—ã€‚å¦‚æœæƒ³è‡ªå®šä¹‰é˜…è¯»æ–‡å­—æ—¶é•¿ï¼Œè¯·åœ¨ `eachFileWords` çš„ `readEachFileWords()` ä¼ å…¥åé¢ä¸¤ä¸ªå‚æ•°ã€‚åˆ†åˆ«ä¸º 1 åˆ†é’Ÿé˜…è¯»çš„ä¸­æ–‡å’Œè‹±æ–‡ä¸ªæ•°ã€‚

**indexIteration**

- ç±»å‹ï¼š`number`
- é»˜è®¤å€¼ï¼š3000

å¦‚æœé¦–é¡µè·å–è®¿é—®é‡å¤±è´¥ï¼Œåˆ™æ¯éš”å¤šå°‘æ—¶é—´åè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œç›´åˆ°è·å–æˆåŠŸæˆ–è·å– 10 æ¬¡åã€‚é»˜è®¤ 3 ç§’ã€‚

æ³¨æ„ï¼šè®¾ç½®æ—¶é—´å¤ªä½ï¼Œå¯èƒ½å¯¼è‡´è®¿é—®é‡ + 2ã€+ 3 ......

**pageIteration**

- ç±»å‹ï¼š`number`
- é»˜è®¤å€¼ï¼š3000

å¦‚æœæ–‡ç« é¡µè·å–è®¿é—®é‡å¤±è´¥ï¼Œåˆ™æ¯éš”å¤šå°‘æ—¶é—´åè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œç›´åˆ°è·å–æˆåŠŸæˆ–è·å– 10 æ¬¡åã€‚é»˜è®¤ 3 ç§’ã€‚

æ³¨æ„ï¼šè®¾ç½®æ—¶é—´å¤ªä½ï¼Œå¯èƒ½å¯¼è‡´è®¿é—®é‡ + 2ã€+ 3 ......

è¯´æ˜ï¼šæˆåŠŸè·å–ä¸€æ¬¡è®¿é—®é‡ï¼Œè®¿é—®é‡ + 1ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡è·å–å¤±è´¥åï¼Œè®¾ç½®çš„æ¯ä¸ªéš”æ®µé‡æ–°è·å–æ—¶é—´ï¼Œå°†ä¼šå½±å“è®¿é—®é‡çš„æ¬¡æ•°ã€‚å¦‚ 100 å¯èƒ½æ¯æ¬¡è·å–è®¿é—®é‡ + 3ã€‚

## ç»“æŸè¯­

å¦‚æœä½ è¿˜æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å»æˆ‘çš„ GitHub ä»“åº“æˆ–è€… Gitee ä»“åº“æŸ¥çœ‹æºç ã€‚

- [GitHub](https://github.com/Kele-Bingtang/Kele-Bingtang.github.io)

- [Gitee](https://gitee.com/kele-bingtang/Kele-Bingtang)

å¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œè¯„è®ºåŒºç•™è¨€å‘Šè¯‰æˆ‘ï¼Œæˆ–è€…åŠ å…¥ Vdoing ä¸»é¢˜çš„ QQ ç¾¤ï¼š694387113ã€‚è°¢è°¢ï¼
